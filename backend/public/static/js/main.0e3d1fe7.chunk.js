(this["webpackJsonpfinal-proj"]=this["webpackJsonpfinal-proj"]||[]).push([[0],{512:function(e,t,a){},513:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),s=a(24),c=a.n(s),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var d=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,594)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))},l=a(5),u=a(6),b=a(9),j=a(8),h=a(36),p=a(11),f=a.n(p),O=a(19),m=a(25),x=a(13),g=a(4),v=a(138),C=a.n(v),y="/api/",k=C.a.create({withCredentials:!0}),N=function(e,t){return B(e,"GET",t)},I=function(e,t){return B(e,"POST",t)},w=function(e,t){return B(e,"PUT",t)};function B(e){return S.apply(this,arguments)}function S(){return S=Object(O.a)(f.a.mark((function e(t){var a,r,n,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,k({url:"".concat(y).concat(t),method:a,data:r,params:"GET"===a?r:null});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),S.apply(this,arguments)}var T={query:D,get:function(e,t){return D(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=A(),D(e).then((function(a){return a.push(t),L(e,a),t}))},put:function(e,t){return D(e).then((function(a){var r=a.findIndex((function(e){return e._id===t._id}));return a.splice(r,1,t),L(e,a),t}))},remove:function(e,t){return D(e).then((function(a){var r=a.findIndex((function(e){return e._id===t}));a.splice(r,1),L(e,a)}))},postMany:function(e,t){return D(e).then((function(a){return t=t.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{_id:A()})})),a.push.apply(a,Object(m.a)(t)),L(e,a),a}))},save:L};function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=JSON.parse(localStorage.getItem(e))||[];return new Promise((function(e,r){setTimeout((function(){e(a)}),t)}))}function L(e,t){localStorage.setItem(e,JSON.stringify(t))}function A(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var M={query:function(e){return N("boards",{userId:e})},remove:function(e){return T.remove("boardsDB",e)},getBoardById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N("boards/".concat(e),{filterBy:t})},save:function(e){return e._id?w("boards/".concat(e._id),e):I("boards",e)}};var E=a(244),U=a.n(E),F=function(){var e=null,t={setup:function(){e=U()("")},on:function(t,a){e.on(t,a)},off:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(a?e.off(t,a):e.removeAllListeners(t))},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}};return t}();var _="usersDB",R="loggedinUser",P="615f4586c375bb154681275d",G={login:function(e){return W.apply(this,arguments)},logout:function(){return K.apply(this,arguments)},signup:function(e){return J.apply(this,arguments)},getLoggedinUser:V,getUsers:function(){return N("user")},getById:H,remove:function(e){return T.remove(_,e)},update:function(e){return z.apply(this,arguments)},filterUserBoards:function(e,t,a){return e.filter((function(e){return!!e.createdBy&&("all"===a||("owner"===a?e.createdBy._id===t:"guest"===a?e.createdBy._id!==t:"starred"===a?X(e,t):[]))}))},isBoardStarred:X,toggleStarBoard:function(e,t){var a=e.boardMembers.findIndex((function(e){return e._id===t}));return e.boardMembers[a].isStarred=!e.boardMembers[a].isStarred,e},getGuestUser:function(){return Q.apply(this,arguments)}};function H(e){return q.apply(this,arguments)}function q(){return(q=Object(O.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.put(_,t);case 2:return V()._id===t._id&&Y(t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(O.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("auth/login",t);case 2:if(a=e.sent){e.next=5;break}throw new Error("login service error");case 5:return e.abrupt("return",Y(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(O.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initials=Z(t.fullname),e.next=3,I("auth/signup",t);case 3:return a=e.sent,e.abrupt("return",Y(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(R),e.next=3,I("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return JSON.parse(sessionStorage.getItem(R)||"null")}function Q(){return(Q=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(P);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){var a=e.boardMembers.findIndex((function(e){return e._id===t}));if(a>-1)return e.boardMembers[a].isStarred}function Y(e){return sessionStorage.setItem(R,JSON.stringify(e)),e}function Z(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()})).join("")}var $={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],a="";for(;e>0;)e--,a+=t[Math.floor(Math.random()*t.length)]+" ";return a},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},getFormattedBgStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";if("object"===typeof e){var a="small"===t?e.small:e.full;return{background:"url(".concat(a,") center / cover no-repeat")}}return{background:e}}};var ee={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ee.emit("show-user-msg",{txt:e,type:t})}function ae(e){te(e,"success")}function re(e){te(e,"danger")}window.myBus=ee,window.showUserMsg=te;var ne={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}};function se(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.query(e);case 3:r=t.sent,a({type:"SET_BOARDS",boards:r}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),re("Sorry cannot load boards"),console.log("BoardActions: err in loadBoards",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ce(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=5;break}t.t0=null,t.next=8;break;case 5:return t.next=7,M.getBoardById(e);case 7:t.t0=t.sent;case 8:r=t.t0,a({type:"SET_BOARD",board:Object(g.a)({},r)}),t.next=16;break;case 12:t.prev=12,t.t1=t.catch(0),re("Sorry cannot load board"),console.log("BoardActions: err in loadBoards",t.t1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function ie(e,t){return function(){var a=Object(O.a)(f.a.mark((function a(r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{r({type:"SET_LIST",list:e}),r({type:"SET_CARD",card:t})}catch(n){console.log("BoardActions: err in loadList",n)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function oe(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.save(e);case 3:return r=t.sent,a({type:"ADD_BOARD",board:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),re("Sorry cannot add board"),console.log("BoardActions: err in addBoard",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function de(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.remove(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),re("Sorry cannot remove board"),console.log("BoardActions: err in removeBoard",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function le(){return function(e){e({type:"TOGGLE_LABELS"})}}function ue(e,t){return function(){var a=Object(O.a)(f.a.mark((function a(r){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r({type:"SET_FILTER",filterBy:e}),t){a.next=6;break}a.t0=null,a.next=9;break;case 6:return a.next=8,M.getBoardById(t,e);case 8:a.t0=a.sent;case 9:n=a.t0,r({type:"UPDATE_BOARD",board:Object(g.a)({},n)}),a.next=16;break;case 13:a.prev=13,a.t1=a.catch(0),console.log("Cannot update notification",a.t1);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.createdBy?function(){var n=Object(O.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t?(c=je(t,a,r),e.activities.unshift(c)):e.activities[0].isNotif="alreday-sent-notif",s({type:"UPDATE_BOARD",board:Object(g.a)({},e)}),console.log("here after store"),n.next=6,M.save(e);case 6:s({type:"UPDATE_LAST_UPDATED_BOARD"}),F.emit("update-board",e),console.log("after board to backend"),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),navigator.onLine?(console.log("im online board action"),s({type:"UNDO_UPDATE_BOARD"}),re("Sorry cannot update board")):(console.log("im in offline board action"),ne.saveToStorage("BOARD_DB",e)),console.log("BoardActions: err in updateBoard",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}():function(e){e({type:"UNDO_UPDATE_BOARD"}),re("Templates cannot be changed")}}function je(e,t,a){return function(e){switch(e.action){case"Added":case"Removed":case"Set due date":case"Removed due date":case"Changed due date":case"Completed checklist":case"Added comment":e.isNotif="new-notif";break;default:e.isNotif=!1}return e}({id:$.makeId(),txt:a,createdAt:Date.now(),byMember:G.getLoggedinUser(),action:e,card:t?{cardId:t.cardId,cardTitle:t.cardTitle}:"",isNotif:!1})}function he(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_NOTIF",isNotif:e}),a(e?{type:"SET_NOTIF_COUNT++"}:{type:"SET_NOTIF_COUNT",count:0})}catch(r){console.log("Cannot update notification",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function pe(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_LABEL",labelsProps:e})}catch(r){console.log("Cannot set labels props",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function fe(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_SEARCH_BG",searchStr:e})}catch(r){console.log("Cannot set search background",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Oe(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.login(e);case 3:return r=t.sent,a({type:"SET_USER",user:r}),t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),console.log("Cannot login",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function me(){try{return Oe({username:"pandaguest",password:"123"})}catch(e){console.log("error login as guest")}}var xe=a(64),ge=a(591),ve=a(584),Ce=a(1);function ye(e){var t=e.list,a=e.board,r=e.onUpdateBoard;return Object(Ce.jsx)("div",{children:Object(Ce.jsx)("p",{className:"pointer",onClick:function(){var e=a.lists.findIndex((function(e){return e.listId===t.listId}));a.lists.splice(e,1),console.log("board from delete",a);var n="Deleted list ".concat(t.listTitle);r(n)},children:"Delete"})})}var ke=a(585),Ne=a(79),Ie=a.n(Ne),we=a(569),Be=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,inputTxt:"",filteredMembers:[]},e.toggleMember=function(t){var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=e.props,c=s.loggedInUser,i=s.board,o=i.lists[r].cards[n];if(e.isMemberOnCard(o,t._id)){var d=o.cardMembers.findIndex((function(e){return e._id===t._id}));o.cardMembers.splice(d,1);var l=c._id===t._id?"Left":"Removed"}else{o.cardMembers.push(t);l=c._id===t._id?"Join":"Added"}e.props.updateBoard(i,l,o,t.username)},e.isMemberOnCard=function(e,t){return e.cardMembers.some((function(e){return e._id===t}))},e.handleChange=function(t){var a=t.target;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{inputTxt:a.value}),(function(){var t=new RegExp(e.state.inputTxt,"i");e.setState(Object(g.a)(Object(g.a)({},e.state),{},{filteredMembers:e.props.board.boardMembers.filter((function(e){return t.test(e.fullname)}))}))}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(g.a)(Object(g.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r,filteredMembers:t.boardMembers}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.filteredMembers,c=t.inputTxt;if(!a||null===n||null===r)return Object(Ce.jsx)(Ce.Fragment,{});var i=a.lists[r].cards[n];return Object(Ce.jsxs)("section",{className:"members-popover",children:[Object(Ce.jsx)(we.a,{className:"search-members text-area-auto",placeholder:"Search members",type:"text",onChange:this.handleChange,value:c}),Object(Ce.jsx)("h3",{children:"Board Members"}),s.length?s.map((function(t){if("pandaguest"!==t.username)return Object(Ce.jsxs)("div",{className:"member-preview flex direction-row space-between ",onClick:function(){return e.toggleMember(t)},children:[Object(Ce.jsxs)("div",{className:"flex direction-row ",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:t.fullname,src:t.imgUrl},t._id),Object(Ce.jsxs)("div",{className:"flex align-center",children:[t.fullname," (",t.username,")"]})]}),e.isMemberOnCard(i,t._id)&&Object(Ce.jsx)(Ie.a,{})]})})):Object(Ce.jsxs)(Ce.Fragment,{children:["Looks like that person isn't a member yet. ",Object(Ce.jsx)("br",{}),"Enter their email address to ",Object(Ce.jsx)("br",{}),"add them to the card and board."]})]})}}]),a}(n.a.Component);var Se={updateBoard:be},Te=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Se)(Be),De=a(44),Le=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,currLabel:"",filteredLabels:[],inputTxt:""},e.toggleLabel=function(t){var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=Object(g.a)({},e.state.board),c=s.lists[r].cards[n];if(e.isLabelOnCard(c,t.id)){var i=c.cardLabelIds.findIndex((function(e){return e===t.id}));s.lists[r].cards[n].cardLabelIds.splice(i,1)}else s.lists[r].cards[n].cardLabelIds.push(t.id);e.props.updateBoard(s)},e.isLabelOnCard=function(e,t){return e.cardLabelIds.some((function(e){return e===t}))},e.editLabel=function(t){return function(a){a.stopPropagation();var r=e.props,n=r.changeTitle;(0,r.setUpdateLabel)({label:t,isCreat:!0}),n(!0,"Change label",t)}},e.createLabel=function(){e.props.changeTitle(!0,"Create label")},e.handleChange=function(t){var a=t.target;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{inputTxt:a.value}),(function(){var t=new RegExp(e.state.inputTxt,"i");e.setState(Object(g.a)(Object(g.a)({},e.state),{},{filteredLabels:e.props.board.labels.filter((function(e){return t.test(e.title)}))}))}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(g.a)(Object(g.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r,filteredLabels:t.labels}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.filteredLabels,c=t.inputTxt,i=this.props.labelsProps;if(!a||null===n||null===r)return Object(Ce.jsx)(Ce.Fragment,{});var o=a.lists[r].cards[n];return Object(Ce.jsx)("section",{className:"label-popover",children:!i.isCreate&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(we.a,{className:"search-labels text-area-auto",placeholder:"Search labels...",type:"text",onChange:this.handleChange,value:c}),Object(Ce.jsx)("h4",{children:"Labels"}),s.length?s.map((function(t){return Object(Ce.jsxs)("div",{className:"edit-label-popover flex",onClick:function(){return e.toggleLabel(t)},children:[Object(Ce.jsxs)("div",{className:"edit-label-color "+t.color,children:[Object(Ce.jsx)("span",{children:t.title}),e.isLabelOnCard(o,t.id)&&Object(Ce.jsx)(Ie.a,{})]}),Object(Ce.jsx)("div",{onClick:e.editLabel(t),className:"edit-label-icon pointer",children:Object(Ce.jsx)(De.c,{})})]},t.id)})):Object(Ce.jsxs)(Ce.Fragment,{children:["Sorry no results... ",Object(Ce.jsx)("br",{}),"Maybe try to create a new label"]}),Object(Ce.jsx)("div",{className:"create-label pointer",onClick:this.createLabel,children:"Create a new label"})]})})}}]),a}(n.a.Component);var Ae={loadBoards:se,removeBoard:de,addBoard:oe,updateBoard:be,setUpdateLabel:pe},Me=Object(x.b)((function(e){return{board:e.boardReducer.board,labelsProps:e.boardReducer.labelsProps}}),Ae)(Le),Ee=a(247),Ue=a.n(Ee),Fe=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={date:null},e.handleDateSelect=function(t){var a=t.toString(),r=a.substring(8,10),n=a.substring(4,7),s=a.substring(11,15),c=a.substring(17,28),i="".concat(r," ").concat(n," ").concat(s," ").concat(c);e.setState(Object(g.a)(Object(g.a)({},e.state),{},{date:Date.parse(i)}))},e.onSaveDate=function(t){var a=e.props,r=a.board,n=a.currListIdx,s=a.currCardIdx,c=r.lists[n].cards[s];if(t)if(t&&c.duedate&&!c.duedate.date)i="Set due date";else i="Changed due date";else var i="Removed due date";c.dueDate={date:t,isDone:!1},e.props.updateBoard(r,i,c),e.props.handleClose()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=t.lists[a].cards[r],s=n.dueDate&&n.dueDate.date?n.dueDate.date:Date.now();this.setState({date:s})}},{key:"render",value:function(){var e=this,t=this.state.date;return t?Object(Ce.jsxs)("div",{className:"dates-popover",children:[Object(Ce.jsx)(Ue.a,{onSelect:this.handleDateSelect,startDate:Date.now(),openToDate:t,inline:!0,formatWeekDay:function(e){return e.substr(0,3)}}),Object(Ce.jsxs)("div",{className:" flex direction-col",children:[Object(Ce.jsx)("button",{className:"btn-date-save",onClick:function(){return e.onSaveDate(e.state.date)},children:"Save"}),Object(Ce.jsx)("button",{className:"btn-date-remove",onClick:function(){return e.onSaveDate(null)},children:"Remove"})]})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component);var _e={loadBoards:se,removeBoard:de,addBoard:oe,updateBoard:be},Re=Object(x.b)((function(e){return{boards:e.boardReducer.boards}}),_e)(Fe),Pe=a(587),Ge=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,title:"Checklist"},e.handleChange=function(t){var a=t.target;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{title:a.value}))},e.onAddChecklist=function(t){t.preventDefault();var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=a.title,c=a.board.lists[r].cards[n],i='Added checklist "'.concat(s,'"'),o=Object(g.a)({},e.state.board);o.lists[r].cards[n].checklists.push({checklistId:$.makeId(),title:s,tasks:[]}),e.props.updateBoard(o,i,c),e.props.handleClose()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(g.a)(Object(g.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r}))}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.title;return t&&null!==r&&null!==a?Object(Ce.jsxs)("section",{className:"popover-checklist",children:[Object(Ce.jsx)("label",{children:"Title"}),Object(Ce.jsxs)("form",{onSubmit:this.onAddChecklist,children:[Object(Ce.jsx)("input",{className:"popover-checklist-input",name:"cardTitle",type:"text",onChange:this.handleChange,value:n}),Object(Ce.jsx)(Pe.a,{onClick:this.onAddChecklist,variant:"contained",className:"add-btn",children:"Add"})]})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component);var He={updateBoard:be},qe=Object(x.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),He)(Ge),ze="dXZ90rFg6fkomwI0ttsljiR3C_o35DBKwIhHcoX6oow",We={getImgs:function(e){return Je.apply(this,arguments)}};function Je(){return Je=Object(O.a)(f.a.mark((function e(t){var a,r,n,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:10,t||(t="scenery",a++),e.next=4,C.a.get("https://api.unsplash.com/search/photos?query=".concat(t,"&per_page=").concat(a,"&orientation=landscape&client_id=").concat(ze));case 4:return r=e.sent,n=r.data.results.map((function(e){return{id:e.id,small:e.urls.small,full:"".concat(e.urls.full,"&auto=format&fit=crop&w=1920"),link:e.links.html,name:e.user.name}})),"scenery"===t&&n.shift(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}var Ke=a(101),Ve=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getImgForCover(9)}},{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.searchCover,r=e.getImgForCover;return Object(Ce.jsxs)("div",{className:"search-cover",children:[Object(Ce.jsx)("div",{className:"search-cover-input",children:Object(Ce.jsx)(Ke.DebounceInput,{minLength:2,debounceTimeout:400,className:"search-cover-img text-area-auto",placeholder:"Search unsplash photo...",type:"text",onChange:t,value:a})}),Object(Ce.jsx)("h4",{children:"Suggested searches"}),Object(Ce.jsx)("div",{className:"suggested-keywords",children:["Animals","Business","Architect","Construction","Organization","Foundation","Minimal","Space","Perspective"].map((function(e,t){return Object(Ce.jsx)("button",{className:"suggested-search-btn",onClick:function(){r(12,e)},children:e},t)}))})]})}}]),a}(n.a.Component),Qe={uploadFile:function(e){var t="https://api.cloudinary.com/v1_1/".concat("looply","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","oxageyls"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return{id:$.makeId(),fileName:e.original_filename,url:e.secure_url,createdAt:Date.now()}})).catch((function(e){return console.error(e)}))}};var Xe=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isCoverSelected:"selected",coverImgs:[],isSearch:!1,searchCover:""},e.onToggleCover=function(){var t=Object(O.a)(f.a.mark((function t(a){var r,n,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.currListIdx,s=r.currCardIdx,c=Object(g.a)({},e.state.board),i=c.lists[n].cards[s],e.isCoverOnCard(i,a.id)?c.lists[n].cards[s].cardStyle={}:c.lists[n].cards[s].cardStyle={id:a.id,color:a.color,isCover:!1},t.next=6,e.props.updateBoard(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isCoverOnCard=function(e,t){return e.cardStyle.id===t},e.handelSize=function(t,a){var r=e.props.board;t.cardStyle.isCover=a,e.props.updateBoard(r)},e.onRemoveCover=function(t){var a=e.props.board;t.cardStyle={},e.props.updateBoard(a)},e.handleChange=function(t){var a=t.target.value;e.setState({searchCover:a},(function(){e.getImgForCover(12)}))},e.getImgForCover=function(){var t=Object(O.a)(f.a.mark((function t(a){var r,n,s,c=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"",n=e.state.searchCover,r&&(n=r),t.next=5,We.getImgs(n,a);case 5:s=t.sent,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{coverImgs:s}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleImgCover=function(t,a){var r=e.props.board;e.isCoverOnCard(t,a.id)?t.cardStyle={}:t.cardStyle={id:a.id,img:a.small,isCover:!1},e.props.updateBoard(r)},e.onAddImage=function(){var t=Object(O.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return re("Uploading..."),t.next=3,Qe.uploadFile(a);case 3:r=t.sent,e.onSaveCover(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveCover=function(t){var a=e.props,r=a.board,n=a.currListIdx,s=a.currCardIdx,c=r.lists[n].cards[s];e.isCoverOnCard(c,t.id)?c.cardStyle={}:c.cardStyle={id:t.id,img:t.url,isCover:!1},c.attachments.unshift(t),e.props.updateBoard(r),ae("Uploading Photo")},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r}),this.getImgForCover(6)}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.coverImgs,c=t.searchCover,i=this.props,o=i.changeTitle,d=i.isSearch;if(!a||null===n||null===r)return Object(Ce.jsx)(Ce.Fragment,{});var l=a.lists[r].cards[n],u=l.cardStyle.isCover?"":"selected",b=l.cardStyle.isCover?"selected":"";return Object(Ce.jsxs)("section",{className:"popover-cover",children:[d&&Object(Ce.jsx)(Ve,{searchCover:c,getImgForCover:this.getImgForCover,handleChange:this.handleChange}),!d&&Object(Ce.jsx)("h4",{children:"Size"}),!d&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("div",{className:"header-cover",children:[Object(Ce.jsxs)("div",{onClick:function(){e.handelSize(l,!1)},className:"header-half-cover pointer  ".concat(u),children:[Object(Ce.jsx)("div",{className:"paragraph"}),Object(Ce.jsx)("div",{className:"row"}),Object(Ce.jsx)("div",{className:"row second"})]}),Object(Ce.jsxs)("div",{onClick:function(){e.handelSize(l,!0)},className:"header-full-cover pointer ".concat(b),children:[Object(Ce.jsx)("div",{className:"row full"}),Object(Ce.jsx)("div",{className:"row second full"})]})]}),l.cardStyle.id&&Object(Ce.jsx)("div",{className:"remove-cover btn",onClick:function(){e.onRemoveCover(l)},children:"Remove cover"})]}),!d&&Object(Ce.jsx)("h4",{className:"color-title",children:"Colors"}),!d&&Object(Ce.jsx)("div",{className:"color-plate",children:a.covers.length&&a.covers.map((function(t){return Object(Ce.jsx)("div",{onClick:function(){return e.onToggleCover(t)},className:"color-sqr pointer ".concat(t.color," \n                             ").concat(e.isCoverOnCard(l,t.id)?"color-selected":""," ")},t.id)}))}),!d&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h4",{children:"Attachment"}),Object(Ce.jsx)("label",{htmlFor:"file-input",children:Object(Ce.jsx)("div",{className:"uplaod-img btn pointer",children:"Upload a cover image"})}),Object(Ce.jsx)("input",{type:"file",className:"file-input",id:"file-input",onChange:this.onAddImage})]}),Object(Ce.jsxs)("div",{children:[!d&&Object(Ce.jsx)("h4",{children:"Unsplash"}),d&&Object(Ce.jsx)("h4",{children:"Top photos"}),Object(Ce.jsx)("div",{className:"cover-img-plate pointer",children:s.map((function(t){return Object(Ce.jsx)("div",{onClick:function(){return e.onToggleImgCover(l,t)},className:"img-cover ".concat(e.isCoverOnCard(l,t.id)?"cover-selected":""," "),style:{backgroundImage:"url(".concat(t.small,")")}},t.id)}))})]}),Object(Ce.jsx)("div",{className:"search-cover btn pointer",children:!d&&Object(Ce.jsx)("span",{onClick:function(){o(!0,"change cover")},children:"Search for photos"})})]})}}]),a}(n.a.Component);var Ye={loadBoards:se,removeBoard:de,addBoard:oe,updateBoard:be},Ze=Object(x.b)((function(e){return{boards:e.boardReducer.boards}}),Ye)(Xe),$e=a(102),et=a.n($e),tt=a(252),at=a.n(tt),rt=a(144),nt=a.n(rt),st=a(253),ct=a.n(st),it=a(254),ot=a.n(it),dt=a(251),lt=a.n(dt),ut=a(145),bt=a.n(ut),jt=a(256),ht=a.n(jt),pt=a(257),ft=a.n(pt),Ot=a(255),mt=a.n(Ot),xt=a.p+"static/media/menu-arrow-icon.4d02ed18.svg";function gt(e){var t=e.labelId,a=e.boardLabels,r=(e.type,a.find((function(e){return e.id===t})));return Object(Ce.jsx)("div",{className:"".concat(r.color," label pointer"),children:r.title})}var vt=a(580),Ct=a(250),yt=a.n(Ct),kt=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleDone=function(t){t.stopPropagation(),e.props.onToggleDone()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.dueDate;return Object(Ce.jsxs)("div",{className:"due-date-preview",children:[Object(Ce.jsx)("h3",{children:"Due Date"}),Object(Ce.jsxs)("div",{className:"date-display flex direction-row",children:[Object(Ce.jsx)(vt.a,{checked:e.isDone,onClick:this.onToggleDone}),Object(Ce.jsxs)("div",{className:" gray hover flex direction-row align-center",children:[Object(Ce.jsx)("div",{className:"date",children:new Date(e.date).toString().substring(0,16)}),e.isDone&&Object(Ce.jsx)("div",{className:"status done",children:"COMPLETE"}),!e.isDone&&e.date<Date.now()&&Object(Ce.jsx)("div",{className:"status overdue",children:"OVERDUE"}),Object(Ce.jsx)(yt.a,{})]})]})]})}}]),a}(n.a.Component),Nt=a(258),It=a.n(Nt),wt=a(259),Bt=a.n(wt),St=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=t.loggedInUser,n=function(t){switch(t.type){case"members":case"change members":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(et.a,{}),t.title]});case"add-members":case"add-labels":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(lt.a,{})});case"list actions":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(De.d,{})});case"labels":case"edit labels":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(at.a,{})," ",t.title]});case"labels-preview":return Object(Ce.jsx)(gt,Object(g.a)({},t));case"checklist":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(nt.a,{})," Checklist"]});case"dates":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(ct.a,{}),t.title]});case"dates-edit":case"edit-dates":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(kt,Object(g.a)({},t))," "]});case"attachments":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(bt.a,{className:"attachment-icon"})," Attachments"]});case"add-attachments":return Object(Ce.jsx)(Ce.Fragment,{children:"Add an attachment"});case"cover":case"change cover":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(ot.a,{})," ",Object(Ce.jsx)("span",{children:t.title})]});case"delete-card":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)(mt.a,{})," Delete"]});case"move-card":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)(ht.a,{}),"  Move"]});case"copy-card":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)(ft.a,{})," Copy"]});case"userMenu":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(ke.a,{alt:"",src:r.imgUrl,className:"logged-in-avatar",children:Object(Ce.jsx)("p",{children:r.initials})})});case"boardMember":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)("span",{className:"board-member-btn"})});case"userBoards":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("span",{onClick:function(){return t.onToggle()},children:[Object(Ce.jsx)("span",{children:"Boards"}),Object(Ce.jsx)("img",{src:xt,alt:""})]})});case"starredBoards":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("span",{onClick:function(){return t.onToggle()},children:[Object(Ce.jsx)("span",{children:"Starred"}),Object(Ce.jsx)("img",{src:xt,alt:""})]})});case"newNotif":return Object(Ce.jsxs)("div",{className:"unread-notif flex",children:[" ",Object(Ce.jsx)(It.a,{})," ",Object(Ce.jsx)("div",{className:"notif-background",children:Object(Ce.jsx)("span",{className:"notif-count",children:e.props.notifCount})})]});case"noNotif":return Object(Ce.jsx)(Bt.a,{});case"invite":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)("span",{className:"invite",children:"Invite"})]});default:return t.type}};return Object(Ce.jsx)(n,Object(g.a)({type:a},this.props))}}]),a}(n.a.Component);var Tt=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount}}))(St);var Dt=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}))((function(e){var t=e.user;return Object(Ce.jsxs)("div",{className:"user-info flex",children:[Object(Ce.jsx)(ke.a,{alt:"",src:t.imgUrl,className:"user-avatar",children:Object(Ce.jsx)("p",{children:t.initials})}),Object(Ce.jsxs)("div",{className:"user-name-info",children:[Object(Ce.jsx)("p",{className:"fullname",children:t.fullname}),Object(Ce.jsx)("p",{className:"username",children:t.username})]})]})})),Lt=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onLogout=Object(O.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onLogout();case 2:e.props.history.push("/");case 3:case"end":return t.stop()}}),t)}))),e.onRemoveFromBoard=function(t){var a=e.props.board.boardMembers.findIndex((function(e){return e._id===t})),r=Object(g.a)({},e.props.board);r.boardMembers.splice(a,1),e.props.updateBoard(r,"removed ".concat(e.props.user.fullname," from the board")),e.props.handleClose()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.user,r=t.from;return a?Object(Ce.jsxs)("div",{className:"user-menu popover-content",children:[Object(Ce.jsx)(Dt,{user:a,handleClose:this.props.handleClose}),"AppHeader"===r&&Object(Ce.jsx)("div",{children:Object(Ce.jsx)("button",{onClick:this.onLogout,children:"Logout"})}),"BoardHeader"===r&&Object(Ce.jsx)("button",{className:"remove-member-btn",onClick:function(){return e.onRemoveFromBoard(a._id)},children:"Remove from board"})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component);var At={onLogout:function(){return function(e){G.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){console.log("Cannot logout",e)}))}},updateBoard:be},Mt=Object(h.f)(Lt),Et=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),At)(Mt),Ut=a(586),Ft=a(588),_t=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activity,a=e.display;return Object(Ce.jsxs)("div",{className:"activity-preview flex direction-row",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:t.byMember.fullname,src:t.byMember.imgUrl},t.byMember._id),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("h4",{children:[t.byMember.fullname," ",t.action," ",t.txt,"menu"===a&&t.card.cardTitle&&'on card: "'.concat(t.card.cardTitle,'"')]}),Object(Ce.jsxs)("small",{children:[" ",new Date(t.createdAt).toString().substring(0,16)]})]})]})}}]),a}(n.a.Component);function Rt(e){var t=e.board;return Object(Ce.jsx)(Ce.Fragment,{children:t.activities.length&&t.activities.map((function(e){return Object(Ce.jsx)(_t,{activity:e,display:"menu"},e.id)}))})}var Pt=a.p+"static/media/close.e9203ba4.svg";function Gt(e){var t=e.board,a=e.toggleMenu,n=e.isMenuOpen,s=function(e,t){return function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&(a(),console.log("toggle menu"))}},c="right";return Object(Ce.jsx)("div",{className:"menu-visible",children:Object(Ce.jsxs)(r.Fragment,{children:[Object(Ce.jsx)(Pe.a,{onClick:s(),children:c}),Object(Ce.jsx)(Ut.a,{anchor:c,open:n,hideBackdrop:!0,children:Object(Ce.jsxs)("div",{className:"menu-wrapper",children:[Object(Ce.jsx)("div",{className:"menu-screen",onClick:s()}),Object(Ce.jsxs)("div",{className:"board-menu-content",children:[Object(Ce.jsxs)("div",{className:"board-menu-content-header flex",children:[Object(Ce.jsx)("div",{className:"title",children:Object(Ce.jsx)("h3",{children:"Menu"})}),Object(Ce.jsx)("span",{className:"exit-icon",onClick:s(),children:Object(Ce.jsx)("img",{src:Pt,alt:"Close"})})]}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsxs)("div",{className:"menu-content fancy-scrollbar",children:[Object(Ce.jsx)("div",{className:"board-actions",children:Object(Ce.jsx)("button",{className:"menu-action-btn",children:"Change background"})}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"activities",children:Object(Ce.jsx)(Rt,{board:t})})]})]})]})})]},c)})}var Ht=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,urlLink:""},e.onAddAttach=function(){var t=Object(O.a)(f.a.mark((function t(a){var r,n,s,c,i,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return re("Uploading..."),t.next=3,Qe.uploadFile(a);case 3:r=t.sent,n=e.props,s=n.board,c=n.currListIdx,i=n.currCardIdx,(o=s.lists[c].cards[i]).attachments.unshift(r),e.props.updateBoard(s,"Attached",o),e.props.handleClose(),ae("Uploading Complete");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r})}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx;e.urlLink;return t&&null!==r&&null!==a?Object(Ce.jsxs)("section",{className:"popover-attachment flex direction-col",children:[Object(Ce.jsx)("label",{htmlFor:"file-upload",children:"Computer"}),Object(Ce.jsx)("input",{id:"file-upload",type:"file",onChange:this.onAddAttach})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component);var qt={loadBoards:se,removeBoard:de,addBoard:oe,updateBoard:be},zt=Object(x.b)((function(e){return{board:e.boardReducer.board}}),qt)(Ht);function Wt(e){var t=e.onDeleteCard;return Object(Ce.jsxs)("section",{className:"delete-card-popover",children:[Object(Ce.jsxs)("p",{children:["All actions will be removed from the activity ",Object(Ce.jsx)("br",{}),"feed and you won\u2019t be able to re-open the ",Object(Ce.jsx)("br",{}),"card. There is no undo."]}),Object(Ce.jsx)("button",{onClick:t,children:"Delete"})]})}var Jt=a(20),Kt=a(578),Vt=a(589),Qt=a(574),Xt=a(581),Yt=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={listIdx:0,cardIdx:0,title:""},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(Jt.a)({},r,n))},e.onMoveCard=function(t){var a,r=e.props.board,n=e.state,s=n.listIdx,c=n.cardIdx,i=n.title,o=r.lists[s].listId;r.lists.forEach((function(e){e.cards.forEach((function(a,r){a.cardId===t.cardId&&e.cards.splice(r,1)})),e.listId===o?(e.cards.splice(c,0,t),a="Moved card ".concat(i)):a="copied card ".concat(i)})),e.props.history.push("/boards/".concat(r._id)),e.props.updateBoard(r,a,t)},e.onCopyCard=function(){var t=e.props.currCard;if(e.state.title){var a=JSON.parse(JSON.stringify(t));a.cardId=$.makeId(),a.cardTitle=e.state.title,e.onMoveCard(a)}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currListIdx,a=e.currCardIdx,r=e.currCard;this.setState({listIdx:t,cardIdx:a,title:r.cardTitle})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,r=t.isCopy,n=this.state,s=n.listIdx,c=n.cardIdx,i=n.title,o=a.lists[s].cards;return Object(Ce.jsxs)("section",{className:"move-copy-card-popover flex direction-col",children:[Object(Ce.jsxs)("div",{className:"board-title",children:[Object(Ce.jsx)("h4",{children:"Board:"}),Object(Ce.jsx)("h4",{children:a.boardTitle})]}),r&&Object(Ce.jsxs)("div",{className:"card-title flex direction-col",children:[Object(Ce.jsx)("label",{htmlFor:"title",children:Object(Ce.jsx)("h4",{children:"Title:"})}),Object(Ce.jsx)(we.a,{id:"title",name:"title",className:"text-area-auto",type:"text",placeholder:"Title",onChange:this.handleChange,value:i,autoFocus:!0})]}),Object(Ce.jsx)("h4",{className:"copy-to",children:"copy to..."}),Object(Ce.jsxs)("div",{className:"list-position flex diirection-row space-between",children:[Object(Ce.jsxs)(Qt.a,{variant:"standard",children:[Object(Ce.jsx)(Vt.a,{id:"list",children:"List"}),Object(Ce.jsx)(Kt.a,{label:"List",labelId:"list",id:"select-list",value:s,name:"listIdx",onChange:this.handleChange,children:a.lists.map((function(e,t){return Object(Ce.jsx)(Xt.a,{value:t,children:e.listTitle})}))})]}),Object(Ce.jsxs)(Qt.a,{variant:"standard",children:[Object(Ce.jsx)(Vt.a,{id:"position",children:"Position"}),Object(Ce.jsx)(Kt.a,{labelId:"position",id:"select-position",value:c,name:"cardIdx",onChange:this.handleChange,children:o.length?o.map((function(e,t){return Object(Ce.jsx)(Xt.a,{value:t,children:t?t+1:1})})):Object(Ce.jsx)(Xt.a,{value:0,children:"1"})})]})]}),!r&&Object(Ce.jsx)("button",{onClick:function(){return e.onMoveCard(e.props.currCard)},children:"Move"}),r&&Object(Ce.jsx)("button",{onClick:this.onCopyCard,children:"Create card"})]})}}]),a}(n.a.Component);var Zt={updateBoard:be},$t=Object(h.f)(Yt),ea=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Zt)($t),ta=a(33),aa=a(81),ra=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).toggleStar=function(t,a){t.stopPropagation();var r=e.props,n=r.loggedInUser;(0,r.updateBoard)(G.toggleStarBoard(a,n._id)),console.log("updated star board")},e.getBoardBtns=function(t){return console.log("this.props:",e.props),t.map((function(t){var a=$.getFormattedBgStyle(t.boardStyle);return Object(Ce.jsxs)("div",{className:"board-menu-btn flex align-center",children:[Object(Ce.jsxs)(ta.b,{className:"flex align-center",to:"/boards/".concat(t._id),onClick:function(){return e.props.handleClose()},children:[Object(Ce.jsx)("span",{className:"board-bg",style:a}),Object(Ce.jsx)("p",{children:t.boardTitle})]},t._id),"starredBoards"===e.props.type?Object(Ce.jsx)("button",{className:"star-board",onClick:function(a){return e.toggleStar(a,t)},children:Object(Ce.jsx)(aa.a,{})}):Object(Ce.jsx)(Ce.Fragment,{})]},t._id)}))},e.getfilteredBoards=function(t){var a=e.props,r=a.boards,n=a.loggedInUser;return G.filterUserBoards(r,n._id,t)},e.goToBoard=function(t){e.props.handleClose(),e.props.history.push("/boards/".concat(t))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.loggedInUser,r=t.boards,!a||r.length){e.next=4;break}return e.next=4,this.props.loadBoards(a._id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.type,t="userBoards"===e?this.getfilteredBoards("owner"):this.getfilteredBoards("starred"),a="userBoards"===e?this.getfilteredBoards("guest"):[];return t.length||a.length?Object(Ce.jsxs)("div",{className:"user-boards-popover",children:["userBoards"===e&&Object(Ce.jsxs)(Ce.Fragment,{children:[t.length?Object(Ce.jsxs)("div",{className:"owner-section",children:[Object(Ce.jsx)("h4",{children:"Your Boards"}),Object(Ce.jsx)("div",{className:"owned-boards",children:this.getBoardBtns(t)})]}):Object(Ce.jsx)(Ce.Fragment,{}),a.length?Object(Ce.jsxs)("div",{className:"guest-section",children:[Object(Ce.jsx)("h4",{children:"Guest Boards"}),Object(Ce.jsx)("div",{className:"guest-boards",children:this.getBoardBtns(a)})]}):Object(Ce.jsx)(Ce.Fragment,{})]}),"starredBoards"===e?Object(Ce.jsx)("div",{className:"starred-section",children:Object(Ce.jsx)("div",{className:"starred-boards",children:this.getBoardBtns(t)})}):Object(Ce.jsx)(Ce.Fragment,{})]}):Object(Ce.jsx)("div",{className:"no-boards",children:"No".concat("starredBoards"===e?" starred":""," boards yet...")})}}]),a}(n.a.Component);var na={loadBoards:se,updateBoard:be},sa=Object(x.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),na)(ra),ca=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onNotifClick=function(t){var a=e.props.board,r=a.lists.find((function(e){return e.cards.find((function(e){return e.cardId===t}))}));r?e.props.history.push("/boards/".concat(a._id,"/").concat(r.listId,"/").concat(t)):e.props.history.push("/cardNotFound"),e.props.handleClose()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,r=t.notifCount,n=t.loggedInUser;if(!a._id)return Object(Ce.jsx)("div",{children:"Enter a board to see your notifications"});var s=a.activities.filter((function(e){return e.isNotif&&e.byMember._id!==n._id}));return Object(Ce.jsx)("div",{className:"notif-popover fancy-scrollbar flex align-center direction-col",children:s.length?s.map((function(t,s){return Object(Ce.jsx)("div",{onClick:function(){return e.onNotifClick(t.card.cardId)},className:"notif-allert ".concat(s<r?"unread":""),children:Object(Ce.jsx)("div",{className:"notif pointer",children:Object(Ce.jsxs)("div",{className:"notif-content",children:[Object(Ce.jsxs)("div",{className:"notif-card-titles flex direction-col",style:{backgroundImage:"url(".concat(a.boardStyle.small,")")},children:[Object(Ce.jsx)("span",{className:"notif-card-title",children:Object(Ce.jsx)("span",{className:"notif-card-txt",children:t.card.cardTitle})}),Object(Ce.jsx)("span",{className:"notif-card-board-title",children:a.boardTitle})]}),Object(Ce.jsxs)("div",{className:"notif-member-section flex",children:[Object(Ce.jsx)(ke.a,{className:"notif-avatar flex align-center",alt:t.byMember.fullname,src:t.byMember.imgUrl},t.byMember._id),Object(Ce.jsx)("span",{className:"notif-member-name",children:t.byMember.fullname})]}),Object(Ce.jsx)("div",{className:"notif-action-section flex",children:Object(Ce.jsxs)("div",{className:"notif-action",children:[Object(Ce.jsxs)("span",{children:[t.action,"Added"===t.action?n.username===t.txt?Object(Ce.jsx)("span",{children:" you"}):Object(Ce.jsxs)("span",{children:[" ","  ".concat(t.txt)," "]}):"Removed"===t.action&&n.username===t.txt?Object(Ce.jsx)("span",{children:" you"}):Object(Ce.jsxs)("span",{children:[" ","  ".concat(t.txt)," "]})]}),Object(Ce.jsxs)("small",{className:"notif-date",children:[" ",new Date(t.createdAt).toString().substring(0,16)]})]})})]})})})})):Object(Ce.jsx)("div",{children:"Sorry... no new notifications to show"})})}}]),a}(n.a.Component);var ia={setNotif:he,setNotifCount:function(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_NOTIF_COUNT",count:e})}catch(r){console.log("Cannot update notification",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},oa=Object(h.f)(ca),da=Object(x.b)((function(e){return{board:e.boardReducer.board,isNotif:e.boardReducer.isNotif,loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount}}),ia)(oa),la=a(148),ua=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={labelName:"",labelColor:"",isDelete:!1,labelsColor:[]},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onSaveLabel();var a=t.target.value;e.setState({labelName:a})},e.onSaveLabel=function(){var t=e.state,a=t.labelName,r=t.labelColor,n=e.props,s=n.labelsProps,c=n.board,i=s.label;i.title||i.color?(i.title=a||i.title,i.color=r||i.color):c.labels.push({id:$.makeId(),title:a,color:r}),s.label={},e.props.setUpdateLabel(s),e.props.updateBoard(c),e.props.changeTitle(!1,"labels-preview")},e.labelChoose=function(t){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{labelColor:t}))},e.deleteLabel=function(){var t=e.props,a=t.labelsProps,r=t.board,n=a.label,s=r.labels.findIndex((function(e){return e.id===n.id}));r.labels.splice(s,1),e.props.updateBoard(r),e.props.changeTitle(!1,"labels-preview")},e.confirmDeleteLabel=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isDelete:!e.state.isDelete}))},e.createLabelsArr=function(){for(var t=[],a=1,r=0;r<11;r++)t.push("clr"+a++);e.setState(Object(g.a)(Object(g.a)({},e.state),{},{labelsColor:t}))},e.isLabelChoosen=function(t){return t===e.state.labelColor},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.labelsProps.label;this.createLabelsArr(),e&&this.setState({labelName:e.title})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isDelete,r=t.labelsColor,n=t.labelName,s=this.props.labelsProps;return Object(Ce.jsxs)("div",{className:"labels-board",children:[!a&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("label",{className:"edit-labels-label",children:"Name"}),Object(Ce.jsx)(we.a,{className:"text-area-auto label-input",value:n,"aria-label":"empty textarea",onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(Ce.jsx)("label",{className:"edit-labels-label",children:"Select a color"}),Object(Ce.jsxs)("div",{className:"color-plate",children:[r.map((function(t){return Object(Ce.jsx)("div",{className:"color-sqr pointer + ".concat(t),onClick:function(){return e.labelChoose(t)},children:e.isLabelChoosen(t)&&Object(Ce.jsx)(Ie.a,{})},t.id)})),Object(Ce.jsx)("p",{className:"label-no-color",children:"No color"})]}),Object(Ce.jsxs)("div",{className:"edit-labels-actions flex space-between",children:[Object(Ce.jsx)("div",{className:"edit-labels-btn save pointer",onClick:this.onSaveLabel,children:"Save"}),s.label&&Object(Ce.jsx)("div",{className:"edit-labels-btn delete pointer",onClick:this.confirmDeleteLabel,children:"Delete"})]})]}),a&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("p",{className:"edit-label-delete",children:"There is no undo. This will remove this label from all cards and destroy its history."}),Object(Ce.jsx)("div",{className:"edit-labels-btn delete deleted pointer",onClick:this.deleteLabel,children:"Delete"})]})]})}}]),a}(n.a.Component);var ba={updateBoard:be,setUpdateLabel:pe},ja=Object(x.b)((function(e){return{boards:e.boardReducer.boards,labelsProps:e.boardReducer.labelsProps}}),ba)(ua),ha=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={users:[],inputTxt:"",filteredUsers:[]},e.handleChange=function(t){var a=t.target,r=new RegExp(e.state.inputTxt,"i"),n=e.state.users.filter((function(e){return r.test(e.fullname)}));e.setState(Object(g.a)(Object(g.a)({},e.state),{},{inputTxt:a.value,filteredUsers:n}))},e.isMemberInBoard=function(t){return e.props.board.boardMembers.some((function(e){return e._id===t}))},e.addUser=function(t){if(!e.isMemberInBoard(t._id)){var a=Object(g.a)({},e.props.board);a.boardMembers.push(t),e.props.updateBoard(a,"invited ".concat(t.fullname," to the board")),e.props.handleClose()}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getUsers();case 2:t=e.sent,a=this.props.loggedInUser,t.sort((function(e,t){return e.fullname.localeCompare(t.fullname)})),r=t.filter((function(e){return e._id!==a._id})),this.setState({users:t,filteredUsers:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.users,r=t.inputTxt,n=t.filteredUsers;return a.length?Object(Ce.jsxs)("div",{className:"invite-users",children:[Object(Ce.jsx)(we.a,{className:"search-users text-area-auto",placeholder:"Search users",type:"text",onChange:this.handleChange,value:r}),n.map((function(t){return Object(Ce.jsxs)("button",{className:"user-preview flex align-center space-between ",onClick:function(){return e.addUser(t)},children:[Object(Ce.jsxs)("span",{className:"flex direction-row ",children:[Object(Ce.jsx)(ke.a,{className:"avatar",src:t.imgUrl,children:Object(Ce.jsx)("p",{children:t.initials})}),Object(Ce.jsx)("span",{className:"name flex align-center",children:t.fullname})]}),e.isMemberInBoard(t._id)&&Object(Ce.jsx)("span",{children:Object(Ce.jsx)(Ie.a,{})})]},t._id)}))]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component);var pa={updateBoard:be},fa=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),pa)(ha),Oa=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={anchorEl:null,isEditLabel:!1,newTitle:"",isChangeTitle:!1,currLabel:"",isSearch:!1},e.handleClick=function(t){t.preventDefault(),e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){"userBoards"!==e.props.type&&"starredBoards"!==e.props.type||e.props.onToggle(),e.setState({anchorEl:null}),e.props.markReadNotif&&e.props.markReadNotif()},e.handleDateChange=function(){console.log("im in DynamicPopover.handleDateChange")},e.changeTitle=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("change cover"===a)var n=!0;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{newTitle:a,isChangeTitle:t,currLabel:r,isSearch:n}))},e.handleBack=function(){if("cover"===e.props.titleModal)var t=!0;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isChangeTitle:!e.state.isChangeTitle,newTitle:e.props.titleModal,isSearch:t}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=t.titleModal,s=this.state,c=s.anchorEl,i=s.isChangeTitle,o=s.newTitle,d=s.currLabel,l=s.isSearch,u=Boolean(c),b=i?o:r,j=u?"simple-popover":void 0,h=function(t){switch(t.type){case"members":case"add-members":case"change members":return Object(Ce.jsx)(Te,Object(g.a)({},t));case"list actions":return Object(Ce.jsx)(ye,Object(g.a)({},t));case"labels":case"edit labels":if(i)return Object(Ce.jsx)(ja,Object(g.a)({},t));case"add-labels":case"labels-preview":return i?Object(Ce.jsx)(ja,Object(g.a)({},t)):Object(Ce.jsx)(Me,Object(g.a)({},t));case"dates-edit":case"edit-dates":case"dates":return Object(Ce.jsx)(Re,Object(g.a)({},t));case"attachments":case"add-attachments":return Object(Ce.jsx)(zt,Object(g.a)({},t));case"cover":case"change cover":return Object(Ce.jsx)(Ze,Object(g.a)({},t));case"checklist":return Object(Ce.jsx)(qe,Object(g.a)({},t));case"boardMember":case"userMenu":return Object(Ce.jsx)(Et,Object(g.a)({},t));case"userBoards":case"starredBoards":return Object(Ce.jsx)(sa,Object(g.a)(Object(g.a)({},t),{},{handleClose:e.handleClose}));case"boardMenu":return Object(Ce.jsx)(Gt,Object(g.a)({},t));case"delete-card":return Object(Ce.jsx)(Wt,Object(g.a)({},t));case"move-card":return Object(Ce.jsx)(ea,Object(g.a)({},t));case"copy-card":return Object(Ce.jsx)(ea,Object(g.a)(Object(g.a)({},t),{},{isCopy:!0}));case"newNotif":case"noNotif":return Object(Ce.jsx)(da,Object(g.a)({},t));case"invite":return Object(Ce.jsx)(fa,Object(g.a)({},t))}};return Object(Ce.jsxs)(n.a.Fragment,{children:[Object(Ce.jsx)("button",{onClick:this.handleClick,children:Object(Ce.jsx)(Tt,Object(g.a)({type:a},this.props))}),Object(Ce.jsxs)(ve.a,{className:a,id:j,open:u,anchorEl:c,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(Ce.jsxs)("div",{className:"popover-header-title flex",children:[i&&Object(Ce.jsx)("span",{onClick:this.handleBack,className:"back-icon pointer",children:Object(Ce.jsx)(la.a,{})}),Object(Ce.jsx)("span",{children:b}),Object(Ce.jsx)("button",{className:"close-popover",onClick:this.handleClose})]}),Object(Ce.jsx)("div",{className:"popover-content-container",children:Object(Ce.jsx)(h,Object(g.a)(Object(g.a)({type:a,currLabel:d,isSearch:l,changeTitle:this.changeTitle},this.props),{},{handleClose:this.handleClose}))})]})]})}}]),a}(n.a.Component),ma=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={anchorEl:null,currListIdx:null,currCardIdx:null},e.handleClick=function(t){t.preventDefault(),t.stopPropagation(),e.setState({anchorEl:t.currentTarget})},e.handleClose=function(t){e.setState({anchorEl:null}),t.stopPropagation()},e.removeMember=function(t){return function(a){a.stopPropagation();var r=e.props.board,n=e.props,s=n.currCard,c=n.loggedInUser,i=s.cardMembers.findIndex((function(e){return e._id===t._id}));s.cardMembers.splice(i,1);var o=c._id===t._id?"Left":"Removed";e.props.updateBoard(r,o,s,t.username)}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currListIdx,a=e.currCardIdx;this.setState({currListIdx:t,currCardIdx:a})}},{key:"render",value:function(){var e=this.props.member,t=this.state.anchorEl,a=Boolean(t),r=a?"simple-popover":void 0;return Object(Ce.jsxs)("div",{className:"single-member-popover",children:[Object(Ce.jsx)("span",{className:"btn-photo-member",onClick:this.handleClick,children:Object(Ce.jsx)(ke.a,{className:"card-details-avatar hover",src:e.imgUrl,children:Object(Ce.jsx)("p",{children:e.initials})})}),Object(Ce.jsxs)(ve.a,{id:r,open:a,anchorEl:t,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(Ce.jsxs)("div",{className:"single-member-popover-header-title flex direction-row",children:[Object(Ce.jsxs)("div",{className:"single-member-title flex direction-row",children:[Object(Ce.jsx)(ke.a,{src:e.imgUrl,className:"avatar",children:Object(Ce.jsx)("p",{children:e.initials})}),Object(Ce.jsxs)("div",{className:"user-name-info",children:[Object(Ce.jsx)("h4",{className:"fullname",children:e.fullname}),Object(Ce.jsxs)("p",{className:"username",children:["@",e.username]})]})]}),Object(Ce.jsx)("button",{className:"close-popover",onClick:this.handleClose,children:"X"})]}),Object(Ce.jsx)("div",{className:"popover-content-container",children:Object(Ce.jsx)("div",{className:"remove-from-card pointer",onClick:this.removeMember(e),children:"Remove from card"})})]})]})}}]),a}(r.Component);var xa={updateBoard:be},ga=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,board:e.boardReducer.board}}),xa)(ma);function va(e){var t=e.members,a=e.board,r=e.currListIdx,n=e.currCardIdx,s=e.isCardOpen,c=e.currCard;return Object(Ce.jsxs)("div",{className:"members-list flex direction-row",children:[Object(Ce.jsx)(ge.a,{max:15,className:"members-group",children:t.map((function(e){if("pandaguest"!==e.username)return Object(Ce.jsx)(ga,{member:e,currListIdx:r,currCardIdx:n,currCard:c},e._id)}))}),s&&Object(Ce.jsx)(Oa,{type:"add-members",titleModal:"Members",board:a,currListIdx:r,currCardIdx:n})]})}function Ca(e){var t=e.checklists.reduce((function(e,t){return e.taskCount+=t.tasks.length,t.tasks.forEach((function(t){t.isDone&&e.taskCountDone++})),e}),{taskCount:0,taskCountDone:0}),a=t.taskCount,r=t.taskCountDone,n=a===r?"done":"";return Object(Ce.jsxs)("div",{className:"badge flex align-center ".concat(n),children:[Object(Ce.jsx)("span",{className:"badge-icon checkbox flex align-center  ".concat(n),children:Object(Ce.jsx)(De.b,{className:"card-icon"})}),Object(Ce.jsxs)("span",{className:"card-txt",children:[" ",r+"/"+a," "]})]})}var ya=a(266),ka=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleLabel=function(t){t.preventDefault(),t.stopPropagation(),e.props.toggleLabels()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelId,a=e.boardLabels,r=this.props.isLabelOpen?" label-preview-open":"",n=a.find((function(e){return e.id===t}));return"clr11"===n.color?Object(Ce.jsx)(Ce.Fragment,{children:" "}):Object(Ce.jsx)("div",{onClick:this.onToggleLabel,className:"".concat(n.color," label-card").concat(r),children:r&&n.title})}}]),a}(n.a.Component);var Na={toggleLabels:le},Ia=Object(x.b)((function(e){return{isLabelOpen:e.boardReducer.isLabelOpen}}),Na)(ka),wa=a(263),Ba=a.n(wa),Sa=a(261),Ta=a(262),Da=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleDone=function(t){t.stopPropagation(),t.preventDefault();var a=e.props.card;a.dueDate.isDone=!a.dueDate.isDone,e.props.updateBoard(e.props.board)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.dueDate,t=e.isDone?"done":"",a=!e.isDone&&e.date<Date.now()?"overdue":"";return Object(Ce.jsxs)("div",{className:"badge due-date flex align-center ".concat(t," ").concat(a),onClick:this.onToggleDone,children:[!e.isDone&&Object(Ce.jsx)("span",{className:"check",children:Object(Ce.jsx)(Sa.a,{})}),e.isDone&&Object(Ce.jsxs)("span",{className:"check",children:[" ",Object(Ce.jsx)(Ta.a,{})," "]}),Object(Ce.jsxs)("span",{className:"clock",children:[Object(Ce.jsx)(Ba.a,{})," "]}),Object(Ce.jsx)("span",{className:"date",children:new Date(e.date).toString().substring(3,10)})]})}}]),a}(n.a.Component);function La(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.currCard,s=(e.OnUpdateBoard,e.onArchive);return Object(Ce.jsxs)("div",{className:"quick-card-actions fade-in",children:[Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Oa,{type:"edit labels",title:"Edit labels",titleModal:"Labels",board:t,currListIdx:a,currCardIdx:r})]}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Oa,{type:"change members",title:"Change members",titleModal:"Members",board:t,currListIdx:a,currCardIdx:r})]}),Object(Ce.jsx)("span",{className:"quick-card-actions-btn",children:Object(Ce.jsx)(Oa,{type:"change cover",title:"Change cover",titleModal:"Cover",board:t,currListIdx:a,currCardIdx:r})}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Oa,{type:"move-card",titleModal:"Move Card",board:t,currListIdx:a,currCardIdx:r,currCard:n})]}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Oa,{type:"copy-card",titleModal:"Copy Card",board:t,currListIdx:a,currCardIdx:r,currCard:n})]}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsxs)("button",{onClick:s,children:[Object(Ce.jsx)(De.a,{})," Archive"]})]})]})}var Aa=a.p+"static/media/close-edit-card.56748bb7.svg",Ma=a(264),Ea=a(265);function Ua(e){var t=e.type,a=e.cardCommAttach;return Object(Ce.jsxs)("div",{className:"badge flex align-center",children:[Object(Ce.jsxs)("span",{className:"badge-icon flex align-center",children:["comment"===t&&Object(Ce.jsx)(Ma.a,{}),"attachment"===t&&Object(Ce.jsx)(Ea.a,{})]}),Object(Ce.jsx)("span",{className:"card-txt",children:a.reduce((function(e,t){return++e}),0)})]})}var Fa=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cardTitle:"",isEditTitle:!1,isEditMode:!1,rect:null},e.toggleEditTitle=function(t){if(t){t.stopPropagation(),t.preventDefault();var a=t.target.getBoundingClientRect();a.x=a.x-256}e.props.onEditMode();var r=e.props.card;e.setState({isEditMode:!e.state.isEditMode,cardTitle:r.cardTitle,rect:a})},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onSaveCardTitle(e.state.cardTitle);var a=t.target.value;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{cardTitle:a}))},e.onSaveCardTitle=function(){var t=e.state.cardTitle;if(t){var a=e.props,r=a.board,n=a.card,s=a.updateBoard;n.cardTitle=t,s(r),e.toggleEditTitle(),e.props.onEditMode()}},e.handleClose=function(t){t.stopPropagation(),t.preventDefault(),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isEditTitle:!e.state.isEditTitle}))},e.onArchive=function(){var t=e.props,a=t.card,r=t.board,n=t.updateBoard;a.isArchived=!0;n(Object(g.a)({},r),"Archived card",a),e.toggleEditTitle()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.card,a=e.board,r=e.isDragging,s=e.currListIdx,c=e.currCardIdx,i=e.updateBoard,o=this.state,d=o.isEditMode,l=o.cardTitle,u=o.rect,b=r?"dragged":"not-dragged",j=t.cardStyle.img?"img-cover":t.cardStyle.color,h=d?"quick-card-edit-preview":"",p=t.cardLabelIds?"show-labels":"",f=t.cardStyle.isCover?{fullCover:"full "+j,fullTitle:"full"}:{fullTitle:"half"};return Object(Ce.jsxs)(n.a.Fragment,{children:[d&&Object(Ce.jsx)("div",{className:"screen-quick-card-edit",onClick:this.toggleEditTitle,children:Object(Ce.jsx)("img",{src:Aa,alt:"close"})}),Object(Ce.jsxs)("div",{className:h,style:d?{left:"".concat(u.x),top:"".concat(u.y)}:{},children:[Object(Ce.jsxs)("div",{className:"card-preview-content pointer ".concat(b),children:[t.cardStyle.id&&Object(Ce.jsx)("div",{className:"card-preview-header "+j,style:{backgroundImage:"url(".concat(t.cardStyle.img,")")}}),Object(Ce.jsxs)("div",{className:"card-preview-main-content "+f.fullCover,children:["half"===f.fullTitle&&Object(Ce.jsxs)("div",{className:"list-card-labels  ".concat(p," flex"),children:[" ",t.cardLabelIds&&t.cardLabelIds.map((function(e){return Object(Ce.jsx)(Ia,{labelId:e,boardLabels:a.labels},e)}))]}),!d&&Object(Ce.jsx)("span",{className:"card-preview-title  ".concat(f.fullCover),children:t.cardTitle}),d&&Object(Ce.jsx)(we.a,{className:"quick-card-input",value:l,"aria-label":"card title",onChange:this.handleChange,onKeyPress:this.handleChange,style:{height:"90px"},onFocus:function(e){return e.target.select()},autoFocus:!0}),"half"===f.fullTitle&&Object(Ce.jsxs)("span",{className:"card-preview-icon flex",children:[Object(Ce.jsxs)("div",{className:"icons-preview flex wrap",children:[t.dueDate.date&&Object(Ce.jsx)(Da,{dueDate:t.dueDate,board:a,card:t,updateBoard:i}),t.description&&Object(Ce.jsx)("div",{className:"badge flex align-center",children:Object(Ce.jsx)(ya.a,{})}),t.comments.length?Object(Ce.jsx)(Ua,{type:"comment",cardCommAttach:t.comments}):Object(Ce.jsx)(Ce.Fragment,{children:" "}),t.attachments.length?Object(Ce.jsx)(Ua,{type:"attachment",cardCommAttach:t.attachments}):Object(Ce.jsx)(Ce.Fragment,{children:" "}),Object(Ce.jsx)("div",{title:"checklist",children:t.checklists.length?Object(Ce.jsx)(Ca,{checklists:t.checklists}):Object(Ce.jsx)(Ce.Fragment,{children:" "})})]}),Object(Ce.jsx)("div",{className:"badge-icon members flex",children:t.cardMembers&&Object(Ce.jsx)(va,{members:t.cardMembers,currCard:t,isCardOpen:!1})})]}),!d&&!t.isArchived&&Object(Ce.jsx)("button",{className:"quick-card-edit-btn",onClick:this.toggleEditTitle,children:Object(Ce.jsx)(De.c,{})})]})]}),d&&Object(Ce.jsx)("button",{className:"save-quick-card-btn",onClick:this.onSaveCardTitle,children:"Save"}),d&&Object(Ce.jsx)("div",{children:Object(Ce.jsx)(La,{board:a,currListIdx:s,currCardIdx:c,currCard:t,onArchive:this.onArchive})})]})]})}}]),a}(n.a.Component);var _a={updateBoard:be,loadListAndCard:ie,loadBoard:ce},Ra=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),_a)(Fa),Pa=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditMode:!1},e.handleDnd=function(){console.log("is dragging",e.props.draggingOver)},e.onEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e.onSelectedCard=function(){var t=e.props,a=t.list,r=t.board,n=t.card;e.props.loadListAndCard(a,n),e.state.isEditMode||e.props.history.push("/boards/".concat(r._id,"/").concat(a.listId,"/").concat(n.cardId))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,r=t.currCardIdx,n=t.currListIdx,s=t.list;return a.isArchived?Object(Ce.jsx)(Ce.Fragment,{}):Object(Ce.jsx)(xe.b,{draggableId:a.cardId,index:r,children:function(t,c){return Object(Ce.jsx)("div",Object(g.a)(Object(g.a)(Object(g.a)({onClick:e.onSelectedCard},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(Ce.jsx)(Ra,{list:s,card:a,currListIdx:n,currCardIdx:r,onEditMode:e.onEditMode,isDragging:c.isDragging})}))}})}}]),a}(n.a.Component);var Ga={updateBoard:be,loadListAndCard:ie},Ha=Object(h.f)(Pa),qa=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Ga)(Ha);function za(e){var t=e.cards,a=e.list,r=e.onUpdateBoard,n=e.board,s=e.currListIdx;return t?Object(Ce.jsx)(xe.c,{droppableId:a.listId,type:"card",children:function(e,c){return Object(Ce.jsxs)("section",Object(g.a)(Object(g.a)({className:"all-cards",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(Ce.jsx)(qa,{board:n,currListIdx:s,list:a,currCardIdx:t,card:e,onUpdateBoard:r},e.cardId)})),e.placeholder]}))}}):Object(Ce.jsx)(Ce.Fragment,{children:" "})}var Wa=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cardTitle:""},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onAddCard();var a=t.target.value;e.setState({cardTitle:a})},e.onAddCard=function(){var t=e.state.cardTitle;if(t){var a={cardId:$.makeId(),cardTitle:t,isArchived:!1,description:"",comments:[],cardMembers:[],cardLabelIds:[],checklists:[],createdAt:new Date,dueDate:{},attachments:[],cardStyle:{}},r=e.props,n=r.list,s=r.board;n.cards.push(a),e.setState({cardTitle:""});e.props.updateBoard(s,"Added card",a)}else e.props.onCloseAdding()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.cardTitle;return Object(Ce.jsxs)("div",{className:"all-cards card-previre-content",children:[Object(Ce.jsx)(we.a,{className:"text-area-auto card-input",value:e,placeholder:"Enter a title for this card...","aria-label":"empty textarea",onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(Ce.jsxs)("div",{className:"add-card-actions flex align-center",children:[Object(Ce.jsx)("button",{onClick:this.onAddCard,className:"add-card-btn",children:"Add card"}),Object(Ce.jsx)("button",{className:"flex",onClick:this.props.onCloseAdding,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})})]})]})}}]),a}(n.a.Component);var Ja={updateBoard:be},Ka=Object(x.b)((function(e){return{board:e.boardReducer.board}}),Ja)(Wa),Va=a.p+"static/media/plus.57788bd4.svg",Qa=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAdding:!1,listTitle:"",isEditTitle:!1},e.toggleOnAdd=function(){e.setState({isAdding:!e.state.isAdding})},e.onCloseAdding=function(){e.toggleOnAdd()},e.toggleEditTitle=function(){var t=e.props.list;e.setState({isEditTitle:!e.state.isEditTitle,listTitle:t.listTitle})},e.handleChange=function(t){"Enter"===t.key&&(t.preventDefault(),e.onSaveListTitle());var a=t.target.value;e.setState({listTitle:a})},e.onSaveListTitle=function(){var t=e.state.listTitle;if(t){var a=e.props,r=a.onUpdateBoard,n=a.board,s=a.currListIdx;n.lists[s].listTitle=t,r(n),e.toggleEditTitle()}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.list,r=t.onUpdateBoard,n=t.currListIdx,s=t.board,c=this.state,i=c.isAdding,o=c.isEditTitle,d=c.listTitle;return Object(Ce.jsx)(xe.b,{draggableId:a.listId,index:n,children:function(t){return Object(Ce.jsx)("section",Object(g.a)(Object(g.a)(Object(g.a)({className:"list-wrapper"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(Ce.jsxs)("div",{className:"list-content flex direction-col",children:[Object(Ce.jsxs)("div",{className:"list-header flex",children:[!o&&Object(Ce.jsx)("h2",{onClick:e.toggleEditTitle,children:a.listTitle}),o&&Object(Ce.jsx)(we.a,{className:"text-area-auto list-title-input",value:d,"aria-label":"empty textarea",onChange:e.handleChange,onKeyPress:e.handleChange,onBlur:e.onSaveListTitle,onFocus:function(e){e.target.select()},autoFocus:!0}),Object(Ce.jsx)("div",{className:"list-header-menu-btn",children:Object(Ce.jsx)(Oa,{type:"list actions",board:s,list:a,onUpdateBoard:r,titleModal:"List actions"})})]}),Object(Ce.jsxs)("div",{className:"list-cards fancy-scrollbar",children:[Object(Ce.jsx)(za,{cards:a.cards,board:s,currListIdx:n,list:a,onUpdateBoard:r},a.listId),i&&Object(Ce.jsx)(Ka,{list:a,onUpdateBoard:r,onCloseAdding:e.onCloseAdding})]}),!i&&Object(Ce.jsxs)("span",{className:"add-card-container",onClick:function(){e.toggleOnAdd()},children:[Object(Ce.jsx)("img",{src:Va,alt:""}),"Add a card"]})]})}))}})}}]),a}(n.a.Component);function Xa(e){var t=e.lists,a=e.onUpdateBoard,r=e.board;return Object(Ce.jsx)(xe.c,{droppableId:"all-lists",direction:"horizontal",type:"list",children:function(e){return Object(Ce.jsxs)("div",Object(g.a)(Object(g.a)({className:"all-lists flex"},e.droppableProps),{},{ref:e.innerRef,children:[t.map((function(e,t){return Object(Ce.jsx)(Qa,{board:r,list:e,currListIdx:t,onUpdateBoard:a},e.listId)})),e.placeholder]}))}})}var Ya=a(0),Za=a(267),$a=a.n(Za);var er=Object(x.b)((function(e){return{board:e.boardReducer.board}}))((function(e){var t=e.members,a=e.board;return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(ge.a,{max:5,spacing:-4,children:t.map((function(e){if("pandaguest"!==e.username||"pandaguest"===a.createdBy.username)return Object(Ce.jsxs)("span",{className:"avatar-btn",children:[Object(Ce.jsx)(ke.a,{src:e.imgUrl,children:Object(Ce.jsx)("p",{children:e.initials})},e._id),Object(Ce.jsx)(Oa,{type:"boardMember",titleModal:"",user:e,from:"BoardHeader"})]},e._id)}))})})})),tr=a(268),ar=a.n(tr);function rr(e){var t=e.board,a=e.changeMenu,r=$.getFormattedBgStyle(t.boardStyle);return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)("div",{className:"board-actions",children:[Object(Ce.jsxs)("button",{className:"menu-action-btn",onClick:function(){return a("Change Background","select-bg-type")},children:[Object(Ce.jsx)("span",{className:"change-bg-preview",style:r}),"Change background"]}),Object(Ce.jsxs)("button",{className:"menu-action-btn search flex align-center",onClick:function(){return a("Search cards","search")},children:[Object(Ce.jsx)("span",{className:"search-cards-icon",children:Object(Ce.jsx)(ar.a,{})}),Object(Ce.jsx)("span",{className:"search-cards-txt",children:" Search cards "})]}),Object(Ce.jsxs)("button",{className:"menu-action-btn archive",onClick:function(){return a("Archived","archive")},children:[Object(Ce.jsx)("span",{className:"archive-icon",children:Object(Ce.jsx)(De.a,{})}),Object(Ce.jsx)("span",{className:"archive-txt",children:"Archived items"})]})]}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"activities",children:Object(Ce.jsx)(Rt,{board:t})})]})}function nr(e){return Object(Ce.jsxs)("div",{className:"select-bg flex",children:[Object(Ce.jsxs)("div",{className:"photos",onClick:function(){e.changeMenu("Photos by Unsplash","photos")},children:[Object(Ce.jsx)("img",{src:"https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.8f9c1323c9c16601a9a4.jpg",alt:"Photos"}),Object(Ce.jsx)("p",{children:"Photos"})]}),Object(Ce.jsxs)("div",{className:"colors",onClick:function(){e.changeMenu("Colors","colors")},children:[Object(Ce.jsx)("img",{src:"https://a.trellocdn.com/prgb/dist/images/colors@2x.ec32a2ed8dd8198b8ef0.jpg",alt:"Colors"}),Object(Ce.jsx)("p",{children:"Colors"})]})]})}var sr={updateBoard:be},cr=Object(x.b)((function(){return{}}),sr)((function(e){return Object(Ce.jsx)("div",{className:"choose-bg-color flex wrap",children:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"].map((function(t,a){return Object(Ce.jsx)("div",{className:"bg-color bgclr".concat(a+1),onClick:function(){!function(t){var a=Object(g.a)({},e.board);a.boardStyle=t,e.updateBoard(a,"changed the board background")}(t)}},t)}))})})),ir=a(269),or=a.p+"static/media/bars-loader.ef2c6578.svg";function dr(){return Object(Ce.jsx)("div",{className:"loader flex align-center justify-center",children:Object(Ce.jsx)("img",{src:or,alt:"loading..."})})}var lr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={imgs:[]},e.handleChange=function(){var t=Object(O.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.target.value,t.next=3,e.props.setSearchBg(r);case 3:e.getImgs();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getImgs=Object(O.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We.getImgs(e.props.searchStr,18);case 2:a=t.sent,e.setState({imgs:a});case 4:case"end":return t.stop()}}),t)}))),e.setBgImg=function(t){var a=e.state.imgs[t],r=Object(g.a)({},e.props.board);r.boardStyle={full:a.full,small:a.small},e.props.updateBoard(r,"changed the board background")},e.openLink=function(e){e.stopPropagation()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getImgs();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.imgs;return t&&t.length?Object(Ce.jsxs)("div",{className:"choose-bg-img",children:[Object(Ce.jsxs)("div",{className:"search-photos flex align-center",children:[Object(Ce.jsx)(ir.a,{}),Object(Ce.jsx)(Ke.DebounceInput,{value:this.props.searchStr,minLength:2,debounceTimeout:400,onChange:this.handleChange})]}),Object(Ce.jsx)("div",{className:"bg-img-list flex wrap",children:t.map((function(t,a){return Object(Ce.jsx)("div",{className:"bg-img",style:{backgroundImage:"url(".concat(t.small,")")},onClick:function(){return e.setBgImg(a)},children:Object(Ce.jsx)("a",{href:t.link,target:"_blank",onClick:e.openLink,children:t.name})},t.id)}))})]}):Object(Ce.jsx)(dr,{className:"menu-load"})}}]),a}(n.a.Component);var ur={updateBoard:be,setSearchBg:fe},br=Object(x.b)((function(e){return{searchStr:e.boardReducer.searchBg}}),ur)(lr),jr=a.p+"static/media/checked.97ec8ba4.svg",hr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={filterBy:{searchKey:"",labels:[],members:[],dueDate:[],isFilter:!1}},e.handleChange=function(t){var a=t.target.value,r=e.props.filterBy;r.searchKey=a,r.isFilter=!0,e.props.setFilterBy(r,e.props.board._id)},e.onFilterBy=function(t,a){var r,n=e.props.filterBy[t],s=n.findIndex((function(e){return e===a}));-1!==s?n.splice(s,1):n.push(a),e.setState({filterBy:Object(g.a)(Object(g.a)({},e.state.filterBy),{},(r={},Object(Jt.a)(r,t,n),Object(Jt.a)(r,"isFilter",!0),r))},(function(){e.props.setFilterBy(e.state.filterBy,e.props.board._id)}))},e.onToggleSearch=function(t,a){return e.props.filterBy[t].some((function(e){return e===a}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({filterBy:this.props.filterBy})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,r=t.filterBy;return Object(Ce.jsxs)("div",{className:"search-cards",children:[Object(Ce.jsx)(Ke.DebounceInput,{minLength:2,debounceTimeout:2e3,className:"search-cards",type:"text",onChange:this.handleChange,forceNotifyByEnter:!1,value:r.searchKey}),Object(Ce.jsx)("p",{children:"Search by term, label or member"}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsxs)("div",{className:"search-types",children:[Object(Ce.jsx)("ul",{className:"clean-list",children:a.labels.map((function(t){return Object(Ce.jsx)("li",{className:"labels pointer",onClick:function(){return e.onFilterBy("labels",t.id)},children:Object(Ce.jsxs)("div",{className:"label-menu",children:[Object(Ce.jsx)("div",{className:"label-list-item",children:Object(Ce.jsx)("div",{className:"label-menu-color pointer ".concat(t.color),children:Object(Ce.jsx)("span",{})})}),Object(Ce.jsx)("span",{children:t.title}),Object(Ce.jsxs)("span",{className:"checked-icon labels",children:[" ",e.onToggleSearch("labels",t.id)&&Object(Ce.jsx)("img",{src:jr,alt:"checked"})]})]})},t.id)}))}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"members-type",children:Object(Ce.jsx)("ul",{className:"members-search clean-list",children:a.boardMembers.map((function(t){return Object(Ce.jsxs)("li",{className:"members-list flex align-center pointer",onClick:function(){return e.onFilterBy("members",t._id)},children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)(ke.a,{alt:t.username,src:t.imgUrl},t._id)}),Object(Ce.jsx)("span",{children:t.username}),Object(Ce.jsxs)("span",{className:"checked-icon members",children:[" ",e.onToggleSearch("members",t._id)&&Object(Ce.jsx)("img",{src:jr,alt:"checked"})]})]},t._id)}))})})]})]})}}]),a}(n.a.Component);var pr={updateBoard:be,loadListAndCard:ie,loadBoard:ce,setFilterBy:ue},fr=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser,filterBy:e.boardReducer.filterBy}}),pr)(hr),Or=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchKey:""},e.handleChange=function(t){var a=t.target.value;e.setState({searchKey:a})},e.onFilterCards=function(){var t=e.props.board;new RegExp(e.state.searchKey,"i").test(t)},e.onSelectedCard=function(t,a){var r=e.props,n=r.board;(0,r.toggleMenu)(),e.props.history.push("/boards/".concat(n._id,"/").concat(t.listId,"/").concat(a.cardId))},e.onDeleteCard=function(t,a,r){return function(n){n.stopPropagation(),n.preventDefault();var s=e.props,c=s.board,i=s.updateBoard;(0,s.toggleMenu)(),c.lists[t].cards.splice(a,1),i(Object(g.a)({},c),"Deleted card",r.tilte)}},e.onSendToBoard=function(t){return function(a){a.stopPropagation(),a.preventDefault();var r=e.props,n=r.board,s=r.updateBoard;(0,r.toggleMenu)(),t.isArchived=!1,s(Object(g.a)({},n))}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.board;return Object(Ce.jsx)("div",{children:t.lists.map((function(t,a){return t.cards.map((function(r,n){return r.isArchived&&Object(Ce.jsxs)("div",{className:"archived-list",onClick:function(){e.onSelectedCard(t,r)},children:[Object(Ce.jsx)(Ra,{card:r,currListIdx:a,currCardIdx:n}),Object(Ce.jsxs)("div",{className:"archive-actions flex",children:[Object(Ce.jsxs)("p",{className:"send-to-board pointer",onClick:e.onSendToBoard(r),children:["Send to board"," "]}),Object(Ce.jsx)("span",{className:"space",children:"-"}),Object(Ce.jsxs)("p",{className:"delete-card pointer",onClick:e.onDeleteCard(a,n,r),children:[" ","Delete"]})]})]})}))}))})}}]),a}(n.a.Component);var mr={updateBoard:be},xr=Object(h.f)(Or),gr=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),mr)(xr);function vr(e){var t=e.board,a=e.toggleMenu,r=e.isMenuOpen,s=e.target,c=e.title,i=e.changeMenu,o=e.onFilterCards,d=function(e){switch(e.target){case"main":return Object(Ce.jsx)(rr,Object(g.a)({},e));case"select-bg-type":return Object(Ce.jsx)(nr,Object(g.a)({},e));case"colors":return Object(Ce.jsx)(cr,Object(g.a)({},e));case"photos":return Object(Ce.jsx)(br,Object(g.a)({},e));case"search":return Object(Ce.jsx)(fr,Object(g.a)({},e));case"archive":return Object(Ce.jsx)(gr,Object(g.a)({},e));case"notifications":return Object(Ce.jsx)(da,Object(g.a)({},e))}},l="right";return Object(Ce.jsx)("div",{className:"menu-visible",children:Object(Ce.jsxs)(n.a.Fragment,{children:[Object(Ce.jsx)(Pe.a,{onClick:a,children:l}),Object(Ce.jsx)(Ut.a,{anchor:l,open:r,hideBackdrop:!0,children:Object(Ce.jsxs)("div",{className:"menu-wrapper",children:[Object(Ce.jsx)("div",{className:"menu-screen",onClick:a}),Object(Ce.jsxs)("div",{className:"board-menu-content",children:[Object(Ce.jsxs)("div",{className:"board-menu-content-header flex",children:[Object(Ce.jsx)("div",{className:"title",children:Object(Ce.jsx)("h3",{children:c})}),Object(Ce.jsx)("span",{className:"exit-icon",onClick:a,children:Object(Ce.jsx)("img",{src:Pt,alt:"Close"})}),"main"!==s&&Object(Ce.jsx)("span",{className:"back-icon",onClick:function(){return i("Menu","main")},children:Object(Ce.jsx)(la.a,{})})]}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"menu-content fancy-scrollbar",children:Object(Ce.jsx)(d,{target:s,board:t,changeMenu:i,toggleMenu:a,onFilterCards:o})})]})]})})]},l)})}var Cr=a(270),yr=a.n(Cr),kr=a.p+"static/media/close-filter.aedc814a.svg",Nr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditTitle:!1,title:"",isMenuOpen:!1,menuTitle:"Menu",menuTarget:"main",cardsCount:0},e.handleChange=function(t){var a=t.target.value;e.setState({title:a})},e.toggleChangeTitle=function(){var t=e.state.isEditTitle;e.setState({isEditTitle:!t})},e.saveBoardTitle=function(t){t.preventDefault();var a=e.state.title,r=e.props,n=r.board,s=r.updateBoard;a||(a="Untitled"),a!==n.boardTitle?(n.boardTitle=a,s(n,"changed board title"),e.toggleChangeTitle()):e.toggleChangeTitle()},e.onToggleStarBoard=function(){var t=e.props,a=t.board,r=t.updateBoard,n=t.loggedInUser;r(G.toggleStarBoard(a,n._id))},e.onFilterCards=function(){var t=e.props,a=t.board,r=t.filterBy;r.members.length||r.labels.length||""!==r.searchKey?e.setState(Object(g.a)(Object(g.a)({},e.state),{},{cardsCount:a.cardsCount})):(e.setState(Object(g.a)(Object(g.a)({},e.state),{},{cardsCount:0})),r.isFilter=!1)},e.resetSearch=function(){e.props.setFilterBy({searchKey:"",labels:[],members:[],isFilter:!1},e.props.board._id),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{cardsCount:0}))},e.toggleMenu=function(){var t=e.state.isMenuOpen;e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{isMenuOpen:!t,menuTitle:"Menu",menuTarget:"main"})})),e.props.setSearchBg("")},e.changeMenu=function(t,a){e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{menuTitle:t,menuTarget:a})}))},e.cloneTemplate=Object(O.a)(f.a.mark((function t(){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(a=Object(g.a)({},e.props.board))._id,a.createdBy=e.props.loggedInUser,a.boardMembers.push(e.props.loggedInUser),t.next=6,e.props.addBoard(a);case 6:r=t.sent,e.props.goToTemplateClone(r._id);case 8:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({title:this.props.board.boardTitle})}},{key:"componentDidUpdate",value:function(e,t){this.props.filterBy&&e.filterBy!==this.props.filterBy&&this.onFilterCards()}},{key:"render",value:function(){var e=this.props,t=e.board,a=e.loggedInUser,r=e.filterBy,n=this.state,s=n.title,c=n.isEditTitle,i=n.isMenuOpen,o=n.menuTarget,d=n.menuTitle,l=!!t.createdBy&&G.isBoardStarred(t,a._id);return Object(Ce.jsxs)("div",{className:"board-header flex align-center space-between wrap",children:[Object(Ce.jsxs)("div",{className:"header-left flex align-center",children:[!c&&Object(Ce.jsx)("h1",{className:"board-btn header-title",onClick:this.toggleChangeTitle,children:t.boardTitle}),c&&Object(Ce.jsx)("form",{onSubmit:this.saveBoardTitle,children:Object(Ce.jsx)($a.a,{className:"header-title-input",autoFocus:!0,name:"boardTitle",type:"text",placeholder:"Enter Title",value:s,inputStyle:{fontSize:18,fontWeight:700,color:"#172b4d"},onChange:this.handleChange,onBlur:this.saveBoardTitle})}),Object(Ce.jsx)("button",{className:"board-btn star ".concat(l?" active":""),onClick:this.onToggleStarBoard,children:Object(Ce.jsx)(Ya.b.Provider,{value:{className:"star-icon"},children:Object(Ce.jsx)(aa.a,{})})}),Object(Ce.jsx)("span",{className:"board-header-divider"}),!t.createdBy&&Object(Ce.jsx)("button",{className:"board-btn template",onClick:this.cloneTemplate,children:"Create board from template"}),Object(Ce.jsx)("div",{className:"board-members",children:Object(Ce.jsx)(er,{members:t.boardMembers})}),Object(Ce.jsx)("span",{className:"board-btn invite",children:Object(Ce.jsx)(Oa,{type:"invite",title:"Invite",titleModal:"Invite to board",board:t})})]}),Object(Ce.jsxs)("div",{className:"header-right flex",children:[r.isFilter&&Object(Ce.jsxs)("div",{className:"cards-count pointer flex align-center",children:[Object(Ce.jsxs)("span",{onClick:this.openSearchOnMenu,className:"number-count",children:[t.cardsCount," search results"]}),Object(Ce.jsx)("span",{onClick:this.resetSearch,className:"close-filter-btn",children:Object(Ce.jsx)("img",{src:kr,alt:"close"})})]}),t.createdBy?Object(Ce.jsxs)("button",{className:"board-btn flex align-center",onClick:this.props.onOpenDashboard,children:[Object(Ce.jsx)("span",{className:"icon",children:Object(Ce.jsx)(yr.a,{})}),Object(Ce.jsx)("span",{className:"title",children:"Dashboard"})]}):Object(Ce.jsx)(Ce.Fragment,{}),!i&&Object(Ce.jsxs)("button",{className:"board-btn show-menu flex align-center",onClick:this.toggleMenu,children:[Object(Ce.jsxs)("span",{className:"icon flex justify-center align-center",children:[Object(Ce.jsx)(De.d,{})," "]}),Object(Ce.jsx)("span",{className:"title",children:"Show menu"})]}),i&&Object(Ce.jsx)(vr,{board:t,toggleMenu:this.toggleMenu,onFilterCards:this.onFilterCards,isMenuOpen:i,target:o,title:d,changeMenu:this.changeMenu})]})]})}}]),a}(n.a.Component);var Ir={updateBoard:be,setNotif:he,setFilterBy:ue,addBoard:oe,setSearchBg:fe},wr=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount,filterBy:e.boardReducer.filterBy}}),Ir)(Nr),Br=a.p+"static/media/plus-white.c1dcc11a.svg",Sr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={listTitle:"",isAdding:!1},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onAddList();var a=t.target.value;e.setState({listTitle:a})},e.onAddList=function(){var t=e.state.listTitle;if(t){var a={listId:$.makeId(),listTitle:t,cards:[]},r=e.props.board;r.lists.push(a);var n="Added list ".concat(t);e.setState({listTitle:""}),e.props.onUpdateBoard(r,n),e.onCloseAdding()}else e.onCloseAdding()},e.toggleOnAdd=function(){e.setState({isAdding:!e.state.isAdding})},e.onCloseAdding=function(){e.toggleOnAdd()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.listTitle,r=t.isAdding,n=r?"add-mode":"";return Object(Ce.jsxs)("div",{onClick:this.toggleOnAdd,className:"add-list board-btn flex align-center pointer "+n,children:[r&&Object(Ce.jsxs)("form",{onSubmit:this.onAddList,children:[Object(Ce.jsx)(we.a,{className:"text-area-auto list-input",value:a,"aria-label":"empty textarea",placeholder:"Enter list title",onChange:this.handleChange,onKeyPress:this.handleChange,onBlur:this.onAddList,autoFocus:!0}),Object(Ce.jsxs)("div",{className:"add-list-actions flex align-center",children:[Object(Ce.jsx)(Pe.a,{className:"add-list-btn",children:"Add List"}),Object(Ce.jsx)("span",{className:"close-add-list-btn",onClick:this.onCloseAdding,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})})]})]}),!r&&Object(Ce.jsxs)("span",{className:"plus flex align-center",onClick:function(){e.toggleOnAdd()},children:[" ",Object(Ce.jsx)("img",{src:Br,alt:"plus"}),Object(Ce.jsx)("span",{className:"add-list-txt",children:"Add another list"})]})]})}}]),a}(n.a.Component),Tr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onJoinCard=function(t){var a=e.props,r=a.board,n=a.currListIdx,s=a.currCardIdx,c=r.lists[n].cards[s];r.lists[n].cards[s].cardMembers.push(t);var i="".concat(t," Added to ");e.props.updateBoard(r,i,c)},e.isMemberOnCard=function(e,t){return e.cardMembers.some((function(e){return e._id===t}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currListIdx,r=t.currCardIdx,n=t.loggedInUser,s=t.board;if(!s)return Object(Ce.jsx)(Ce.Fragment,{});var c=s.lists[a].cards[r];return this.isMemberOnCard(c,n._id)?Object(Ce.jsx)(Ce.Fragment,{}):Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)("h4",{children:"SUGGESTED"}),Object(Ce.jsx)("div",{className:"btn-container join-to-card",children:Object(Ce.jsxs)("button",{onClick:function(){return e.onJoinCard(n)},children:[Object(Ce.jsx)(et.a,{})," Join"]})})]})}}]),a}(n.a.Component);var Dr={updateBoard:be},Lr=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Dr)(Tr),Ar=a(149),Mr=a.n(Ar),Er=a(271),Ur=a.n(Er),Fr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleArchived=function(){var t=e.props,a=t.board,r=t.currCard;r.isArchived=!r.isArchived,e.props.updateBoard(a,"Archived card ".concat(r.title),r)},e.onDeleteCard=function(){var t=e.props,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.currCard;a.lists[r].cards.splice(n,1),e.props.updateBoard(a,"Deleted card",s),e.props.handleClose()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.currCard;return Object(Ce.jsxs)(Ce.Fragment,{children:[!e.isArchived&&Object(Ce.jsxs)("button",{onClick:this.onToggleArchived,children:[Object(Ce.jsx)(Mr.a,{}),"Archive"]}),e.isArchived&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)("button",{onClick:this.onToggleArchived,children:[Object(Ce.jsx)(Ur.a,{}),"Send to board"]}),Object(Ce.jsx)(Oa,{type:"delete-card",titleModal:"Delete card?",onDeleteCard:this.onDeleteCard})]})]})}}]),a}(n.a.Component);var _r={updateBoard:be},Rr=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),_r)(Fr);function Pr(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.handleClose,s=t.lists[a].cards[r];return Object(Ce.jsxs)("div",{className:"add-to-card",children:[Object(Ce.jsx)(Lr,{board:t,currListIdx:a,currCardIdx:r}),Object(Ce.jsx)("h4",{children:"ADD TO CARD"}),Object(Ce.jsxs)("div",{className:"btn-container",children:[Object(Ce.jsx)(Oa,{type:"members",title:"Members",titleModal:"Members",board:t,currListIdx:a,currCardIdx:r}),Object(Ce.jsx)(Oa,{type:"labels",title:"Labels",titleModal:"Labels",board:t,currListIdx:a,currCardIdx:r}),Object(Ce.jsx)(Oa,{type:"checklist",title:"Checklist",titleModal:"Add checklist",board:t,currListIdx:a,currCardIdx:r}),Object(Ce.jsx)(Oa,{type:"dates",title:"Dates",titleModal:"Dates",board:t,currListIdx:a,currCardIdx:r}),Object(Ce.jsx)(Oa,{type:"attachments",title:"attachments",titleModal:"Attachments",board:t,currListIdx:a,currCardIdx:r}),!s.cardStyle.id&&Object(Ce.jsx)(Oa,{type:"cover",title:"Cover",titleModal:"Cover",board:t,currListIdx:a,currCardIdx:r}),Object(Ce.jsx)("h4",{children:"ACTIONS"}),Object(Ce.jsx)(Oa,{type:"move-card",titleModal:"Move Card",board:t,currListIdx:a,currCardIdx:r,currCard:s}),Object(Ce.jsx)(Oa,{type:"copy-card",titleModal:"Copy Card",board:t,currListIdx:a,currCardIdx:r,currCard:s}),Object(Ce.jsx)(Rr,{currCard:s,currListIdx:a,currCardIdx:r,handleClose:n})]})]})}function Gr(e){var t=e.cardLabelIds,a=e.boardLabels,r=e.board,n=e.currCardIdx,s=e.currListIdx;e.changeTitle;return Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Labels"}),Object(Ce.jsxs)("div",{className:"labels-list flex wrap",children:[t.map((function(e){return Object(Ce.jsx)(Oa,{labelId:e,boardLabels:a,type:"labels-preview",titleModal:"Labels",board:r,currListIdx:s,currCardIdx:n},e)})),Object(Ce.jsx)(Oa,{className:"add-labels",type:"add-labels",titleModal:"Labels",board:r,currListIdx:s,currCardIdx:n})]})]})}var Hr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.comment;return Object(Ce.jsxs)("div",{className:"card-details-comment flex direction-row",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:e.byMember.fullname,src:e.byMember.imgUrl},e.byMember._id),Object(Ce.jsxs)("div",{className:"comment-content",children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsx)("h4",{children:e.byMember.fullname}),Object(Ce.jsxs)("small",{children:[" ",new Date(e.createdAt).toString().substring(0,16)]})]}),Object(Ce.jsx)("div",{className:"comment-txt",children:Object(Ce.jsx)("p",{children:e.txt})})]})]})}}]),a}(n.a.Component);function qr(e){var t=e.comments;return t?Object(Ce.jsx)("div",{children:t.length&&t.map((function(e){return Object(Ce.jsx)(Hr,{comment:e},e.id)}))}):Object(Ce.jsx)(Ce.Fragment,{})}function zr(e){var t=e.activities,a=e.currCard;return t?(t=t.filter((function(e){return e.card.cardId===a.cardId})),Object(Ce.jsx)("div",{children:t.length?t.map((function(e){return Object(Ce.jsx)(_t,{activity:e},e.id)})):Object(Ce.jsx)(Ce.Fragment,{})})):Object(Ce.jsx)(Ce.Fragment,{})}var Wr=a(150),Jr=a.n(Wr),Kr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEditing:!1,isDetails:!1,newActivityTxt:""},e.onToggleDetails=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isDetails:!e.state.isDetails}))},e.onToggleComment=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isEditing:!0}))},e.handleChange=function(t){var a=t.target;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{newActivityTxt:a.value}))},e.onSaveActivity=function(t){if(t.stopPropagation(),e.state.newActivityTxt){var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=Object(g.a)({},e.state.board);s.lists[r].cards[n].comments.unshift({byMember:e.props.loggedInUser,createdAt:Date.now(),id:$.makeId(),txt:e.state.newActivityTxt});var c=s.lists[r].cards[n],i=e.state.newActivityTxt.substring(0,20);e.props.OnUpdateBoard(s,"Added comment",c,i),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{newActivityTxt:"",isEditing:!1}))}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(g.a)(Object(g.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r})),console.log("loggedin user: ",this.props.loggedInUser)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditing,r=t.isDetails,n=t.newActivityTxt,s=t.board,c=t.currListIdx,i=t.currCardIdx,o=this.props.loggedInUser;if(!s||null===i||null===c)return Object(Ce.jsx)(dr,{});s.lists[c].cards[i].comments;var d=s.lists[c].cards[i];return Object(Ce.jsxs)("div",{className:"card-activities",children:[Object(Ce.jsxs)("div",{className:"flex direction-row space-between ",children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsx)(Jr.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:"Activity"})]}),!r&&Object(Ce.jsx)("button",{className:"show-hide hover",onClick:this.onToggleDetails,children:"Show details"}),r&&Object(Ce.jsx)("button",{className:"show-hide hover",onClick:this.onToggleDetails,children:"Hide details"})]}),Object(Ce.jsxs)("div",{className:"add-comment-container flex direction-row ",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:o.username,src:o.imgUrl}),Object(Ce.jsxs)("div",{className:" comment-container flex direction-col",onClick:this.onToggleComment,children:[Object(Ce.jsx)(we.a,{className:"input-comment text-area-auto",name:"description",type:"text",placeholder:"Write a comment...",onChange:this.handleChange,value:n}),a&&Object(Ce.jsx)("button",{className:"comment-save",onClick:function(t){return e.onSaveActivity(t)},children:"Save"})]})]}),d.comments.length?Object(Ce.jsx)(qr,{comments:d.comments}):Object(Ce.jsx)(Ce.Fragment,{}),r&&Object(Ce.jsx)(zr,{currCard:d,activities:s.activities})]})}}]),a}(n.a.Component);var Vr=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}))(Kr),Qr=a(272),Xr=a.n(Qr),Yr=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEdit:!1},e.handleChange=function(t){if("Enter"===t.key)t.preventDefault(),e.onSaveTitle();else{var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=Object(g.a)({},e.state.board);s.lists[r].cards[n][t.target.name]=t.target.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{board:s}))}},e.onSaveTitle=function(){e.props.OnUpdateBoard(Object(g.a)({},e.state.board)),e.onToggleEdit()},e.onToggleEdit=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isEdit:!e.state.isEdit}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r})}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.isEdit;if(!t||null===r||null===a)return Object(Ce.jsx)(dr,{});var s=t.lists[a].cards[r];return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("div",{className:"card-details-title flex direction-row",children:[Object(Ce.jsx)(Xr.a,{className:"card-details-icon"}),Object(Ce.jsxs)("div",{className:"flex direction-col",children:[n&&Object(Ce.jsx)(we.a,{className:"text-area-auto",name:"cardTitle",type:"text",placeholder:"Enter title",onChange:this.handleChange,onKeyPress:this.handleChange,value:s.cardTitle,onBlur:this.onSaveTitle,onFocus:function(e){return e.target.select()},autoFocus:!0}),!n&&Object(Ce.jsx)("h2",{onClick:this.onToggleEdit,children:s.cardTitle}),Object(Ce.jsxs)("small",{children:["in list ",Object(Ce.jsx)("span",{children:t.lists[a].listTitle})]})]})]})})}}]),a}(n.a.Component),Zr=a(273),$r=a.n(Zr),en=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEditing:!1},e.onToggleEditing=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isEditing:!0}))},e.handleChange=function(t){var a=t.target,r=e.state,n=r.currListIdx,s=r.currCardIdx,c=Object(g.a)({},e.state.board);c.lists[n].cards[s][a.name]=a.value,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{board:c}))},e.onSaveDescription=function(t){t.preventDefault(),t.stopPropagation(),e.props.OnUpdateBoard(Object(g.a)({},e.state.board)),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isEditing:!1}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r})}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.isEditing;if(!t||null===r||null===a)return Object(Ce.jsx)(dr,{});var s=t.lists[a].cards[r];return Object(Ce.jsxs)("div",{className:"card-description",children:[Object(Ce.jsxs)("div",{className:"flex direction-row align-center",children:[Object(Ce.jsx)($r.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:"Description"}),!n&&s.description&&Object(Ce.jsx)("button",{className:"hover btn-edit",onClick:this.onToggleEditing,children:"Edit"})]}),n&&Object(Ce.jsx)("div",{className:"edit-container",onClick:this.onToggleEditing,children:Object(Ce.jsxs)("form",{onSubmit:this.onSaveDescription,children:[Object(Ce.jsx)(we.a,{name:"description",className:"text-area-auto desc-edit",type:"text",placeholder:"Add a more detailed description...",onChange:this.handleChange,value:s.description,onBlur:this.onSaveDescription,onFocus:function(e){return e.target.select()},autoFocus:!0}),Object(Ce.jsxs)("div",{className:"flex direction-row align-center",children:[n&&Object(Ce.jsx)("button",{className:"save-desc",onClick:this.onSaveDescription,children:"Save"}),n&&Object(Ce.jsx)("button",{className:"discard-desc",onClick:this.onToggleEditing,children:"X"})]})]})}),!n&&s.description&&Object(Ce.jsx)("div",{className:"desc-txt pointer",onClick:this.onToggleEditing,children:Object(Ce.jsx)("p",{children:s.description})}),!n&&!s.description&&Object(Ce.jsx)("div",{className:"desc-txt-placeholder hover",onClick:this.onToggleEditing,children:Object(Ce.jsx)("p",{children:"Add a more detailed description..."})})]})}}]),a}(n.a.Component);function tn(e){var t=e.currChecklist,a={width:s()},r=s(),n="100%"===r?"progressing bar-done":"progressing";function s(){if(!t.tasks.length)return"0%";var e=0;return t.tasks.forEach((function(t){t.isDone&&e++})),"".concat(Math.floor(e/t.tasks.length*100),"%")}return Object(Ce.jsxs)("div",{className:"progress-bar flex direction-row align-center",children:[Object(Ce.jsx)("p",{children:r}),Object(Ce.jsx)("div",{className:"progress-bar-container",children:Object(Ce.jsx)("div",{className:n,style:a})})]})}var an=a(274),rn=a.n(an),nn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={newTaskTxt:null,isEdit:!1},e.onToggleEdit=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isEdit:!e.state.isEdit})),e.props.onEditMode()},e.onDiscardChanges=function(){e.setState({newTaskTxt:e.props.task.txt,isEdit:!1}),e.props.onEditMode()},e.handleChange=function(t){var a=t.target;e.setState(Object(g.a)(Object(g.a)({},e.state),{},{newTaskTxt:a.value}))},e.onSaveTask=function(){var t=e.props,a=t.taskIdx,r=t.task;e.props.onEditTask(a,r.isDone,e.state.newTaskTxt),e.onToggleEdit()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.task;this.setState(Object(g.a)(Object(g.a)({},this.state),{},{newTaskTxt:e.txt}))}},{key:"render",value:function(){var e=this.state,t=e.newTaskTxt,a=e.isEdit,r=this.props.task,n=r.isDone?"task-done":"";return t?Object(Ce.jsxs)("div",{className:"task-input",children:[!a&&Object(Ce.jsx)("div",{className:n,onClick:this.onToggleEdit,children:r.txt}),a&&Object(Ce.jsxs)("div",{className:"task-update",children:[Object(Ce.jsx)(we.a,{className:"text-area-auto task-edit",type:"text",value:t,onChange:this.handleChange}),Object(Ce.jsxs)("div",{className:"flex direction-row align-center",children:[Object(Ce.jsx)("button",{className:"save-task",onClick:this.onSaveTask,children:"Save"}),Object(Ce.jsx)("button",{className:"discard-task",onClick:this.onDiscardChanges,children:"X"})]})]})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component),sn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEdit:!1},e.onEditMode=function(){e.setState({isEdit:!e.state.isEdit})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.task,a=e.taskIdx,r=e.onDeleteTask,n=e.onEditTask,s=this.state.isEdit;return Object(Ce.jsxs)("div",{className:"task-preview flex direction-row space-between",children:[Object(Ce.jsxs)("div",{className:"width-100 flex direction-row align-center",children:[Object(Ce.jsx)(vt.a,{className:"checkbox ".concat(s?"edit":""),checked:t.isDone,onChange:function(){return n(a,!t.isDone,t.txt)}}),Object(Ce.jsx)(nn,{onEditMode:this.onEditMode,task:t,taskIdx:a,onEditTask:n})]}),!s&&Object(Ce.jsx)(rn.a,{className:"delete-task pointer",onClick:function(){return r(a)}})]})}}]),a}(n.a.Component),cn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={txt:""},e.onDiscardChanges=function(){e.setState({txt:""}),e.props.onIsAddItem()},e.handleChange=function(t){"Enter"===t.key?(t.preventDefault(),e.onAddTask()):e.setState({txt:t.target.value})},e.onAddTask=function(){var t=e.state.txt;t&&(e.props.onAddTask(t),e.setState({txt:""}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.txt;return Object(Ce.jsxs)("div",{className:"add-new-task",children:[Object(Ce.jsx)(we.a,{type:"text",className:"text-area-auto task-edit",value:e,onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("button",{className:"save-task",onClick:this.onAddTask,children:"Add"}),Object(Ce.jsx)("button",{className:"discard-task",onClick:this.onDiscardChanges,children:"X"})]})]})}}]),a}(n.a.Component),on=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAddItem:!1,currChecklist:null,title:null},e.onDeleteChecklist=function(){var t=e.props,a=t.board,r=t.currCard,n=t.checklistIdx;r.checklists.splice(n,1),e.props.updateBoard(a)},e.onDeleteTask=function(t){var a=e.state.currChecklist,r=e.props,n=r.board;r.currCard;a.tasks.splice(t,1),e.props.updateBoard(n)},e.onEditTask=function(t,a,r){var n=e.state,s=n.currChecklist,c=(n.title,e.props),i=c.board,o=c.currCard;if(s.tasks[t].isDone=a,s.tasks[t].txt=r,s.tasks.every((function(e){return e.isDone}))){e.props.updateBoard(i,"Completed checklist",o,s.title)}else e.props.updateBoard(i)},e.onAddTask=function(t){var a=e.state.currChecklist,r=e.props,n=r.board;r.currCard;a.tasks.push({id:$.makeId(),txt:t,isDone:!1}),e.props.updateBoard(n)},e.onIsAddItem=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isAddItem:!e.state.isAddItem}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currCard,a=e.checklistIdx,r=t.checklists[a],n=r.title;this.setState(Object(g.a)(Object(g.a)({},this.state),{},{currChecklist:r,title:n}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAddItem,r=t.currChecklist,n=this.props,s=n.board,c=n.checklistIdx;return s&&null!==c&&r?Object(Ce.jsxs)("div",{className:"checklist-app",children:[Object(Ce.jsxs)("div",{className:"flex direction-row space-between ",children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsx)(nt.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:r.title})]}),Object(Ce.jsx)("button",{className:"delete-checklist hover",onClick:this.onDeleteChecklist,children:"Delete"})]}),Object(Ce.jsx)(tn,{currChecklist:r}),r.tasks.length?r.tasks.map((function(t,a){return Object(Ce.jsx)(sn,{task:t,taskIdx:a,onEditTask:e.onEditTask,onDeleteTask:e.onDeleteTask},t.id)})):Object(Ce.jsx)(Ce.Fragment,{}),!a&&Object(Ce.jsx)("button",{className:"add-item hover",onClick:this.onIsAddItem,children:"Add an item"}),a&&Object(Ce.jsx)(cn,{onIsAddItem:this.onIsAddItem,onAddTask:this.onAddTask})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),a}(n.a.Component);var dn={updateBoard:be},ln=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),dn)(on);function un(e){var t=e.currCard,a=t.checklists;return Object(Ce.jsx)(Ce.Fragment,{children:a.map((function(e,a){return Object(Ce.jsx)(ln,{currCard:t,checklistIdx:a},e.checklistId)}))})}function bn(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.handleClose,s=t.lists[a].cards[r],c=s.cardStyle.id?"cover-mode "+s.cardStyle.color:"",i=s.cardStyle.img?"img-cover cover-mode":c;return Object(Ce.jsxs)("div",{className:i,style:{backgroundImage:"url(".concat(s.cardStyle.img,")")},children:[Object(Ce.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:n,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})}),c&&Object(Ce.jsx)("div",{className:"cover-menu pointer",children:Object(Ce.jsx)(Oa,{type:"cover",title:"Cover",titleModal:"Cover",board:t,currListIdx:a,currCardIdx:r})})]})}var jn=a(275),hn=a.n(jn),pn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.cardAttachment;return Object(Ce.jsxs)("a",{href:e.url,target:"_blank",className:"card-attachment-preview flex direction-row",children:[Object(Ce.jsx)("img",{src:e.url}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsxs)("h4",{children:[e.fileName," "]}),Object(Ce.jsx)(hn.a,{className:"icon"})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("small",{children:["Added on ",new Date(e.createdAt).toString().substring(0,16)," - "]}),Object(Ce.jsx)("small",{className:"delete",onClick:this.props.onDeleteAttach(e.id),children:" Delete "})]})]})]})}}]),a}(n.a.Component);function fn(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.OnUpdateBoard,s=t.lists[a].cards[r].attachments,c=function(e){return function(c){c.stopPropagation(),c.preventDefault();var i=s.findIndex((function(t){return t.id===e}));s.splice(i,1);var o=t.lists[a].cards[r];n(t,"Removed attachment",o)}};return s.length?Object(Ce.jsxs)("div",{className:"card-attachments",children:[Object(Ce.jsxs)("div",{className:"title flex direction-row align-center",children:[Object(Ce.jsx)(bt.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:"Attachments"})]}),Object(Ce.jsx)("div",{children:s.map((function(e){return Object(Ce.jsx)(pn,{cardAttachment:e,onDeleteAttach:c},e.id)}))}),Object(Ce.jsx)(Oa,{type:"add-attachments",title:"attachments",titleModal:"Attachments",board:t,currListIdx:a,currCardIdx:r})]}):Object(Ce.jsx)(Ce.Fragment,{})}function On(){return Object(Ce.jsxs)("div",{className:"display-card-archive flex direction-row align-center",children:[Object(Ce.jsx)(Mr.a,{})," ",Object(Ce.jsx)("h3",{children:"This card is Archived."})]})}var mn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={currListIdx:null,currCardIdx:null},e.getCurrCard=function(t){var a=e.props.match.params.listId,r=e.props.match.params.cardId,n=t.lists.findIndex((function(e){return e.listId===a})),s=t.lists[n].cards.findIndex((function(e){return e.cardId===r}));e.setState(Object(g.a)(Object(g.a)({},e.state),{},{currListIdx:n,currCardIdx:s}))},e.onToggleDone=function(){var t=e.state,a=t.currListIdx,r=t.currCardIdx,n=e.props.board,s=n.lists[a].cards[r];s.dueDate.isDone=!s.dueDate.isDone;var c=s.dueDate.isDone?"Marked the due date complete":"Marked the due date incomplete";e.props.updateBoard(n,c,s)},e.OnUpdateBoard=function(t,a,r,n){e.props.updateBoard(t,a,r,n)},e.handleClose=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.board;this.getCurrCard(e)}},{key:"render",value:function(){var e=this.state,t=e.currListIdx,a=e.currCardIdx,r=this.props.board;if(!r||null===a||null===t)return Object(Ce.jsx)(dr,{});var n=r.lists[t].cards[a];return Object(Ce.jsxs)("div",{className:"card-details-wrapper",children:[Object(Ce.jsx)("div",{className:"screen-card-details",onClick:this.handleClose}),Object(Ce.jsxs)("div",{className:"card-details",children:[Object(Ce.jsx)(bn,{board:r,currCard:n,currListIdx:t,currCardIdx:a,handleClose:this.handleClose}),n.isArchived?Object(Ce.jsx)(On,{}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsxs)("div",{className:"card-details-main-content",children:[Object(Ce.jsx)(Yr,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard}),Object(Ce.jsxs)("div",{className:"card-details-content",children:[Object(Ce.jsxs)("div",{className:"card-details-main",children:[Object(Ce.jsxs)("div",{className:"card-details-items flex direction-row items-flex-start wrap",children:[n.cardMembers.length?Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Members"}),Object(Ce.jsx)(va,{members:n.cardMembers,board:r,currListIdx:t,currCardIdx:a,currCard:n,isCardOpen:!0})]}):"",n.cardLabelIds.length?Object(Ce.jsx)(Gr,{cardLabelIds:n.cardLabelIds,boardLabels:r.labels,board:r,currListIdx:t,currCardIdx:a,isCardOpen:!0}):"",n.dueDate.date&&Object(Ce.jsx)("div",{id:"due-date-preview-card",children:Object(Ce.jsx)(Oa,{type:"dates-edit",title:"Dates",titleModal:"Dates",board:r,currListIdx:t,currCardIdx:a,dueDate:n.dueDate,onToggleDone:this.onToggleDone})})]}),Object(Ce.jsx)(en,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard}),Object(Ce.jsx)(fn,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard}),Object(Ce.jsx)(un,{currCard:n}),Object(Ce.jsx)(Vr,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard})]}),Object(Ce.jsx)("div",{className:"card-details-sidebar",children:Object(Ce.jsx)(Pr,{board:r,currListIdx:t,currCardIdx:a,handleClose:this.handleClose})})]})]})]})]})}}]),a}(n.a.Component);var xn={loadBoards:se,removeBoard:de,addBoard:oe,updateBoard:be,loadListAndCard:ie},gn=Object(x.b)((function(e){return{board:e.boardReducer.board,currCard:e.boardReducer.currCard}}),xn)(mn),vn=a(192),Cn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getTasksCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){t+=e.cards.length})),t}},{key:"getOverdueCount",get:function(){var e=this.props.board,t=0,a=0;return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()?t++:e.dueDate&&e.dueDate.isDone&&a++}))})),{overdueCount:t,doneCount:a}}},{key:"percentageDone",get:function(){return this.getOverdueCount.doneCount/this.getTasksCount*100}},{key:"render",value:function(){return Object(Ce.jsxs)("div",{className:"progress-bar-done",children:[Object(Ce.jsx)("h1",{children:"Done Tasks"}),Object(Ce.jsx)("div",{className:"progress-bar",children:Object(Ce.jsx)(vn.a,{className:"circularProgressbar",value:this.percentageDone,styles:Object(vn.b)({pathColor:"#61bd4fb1",trailColor:"#ffffffee"}),children:Object(Ce.jsxs)("div",{className:"text-done",children:[this.percentageDone.toFixed(),"% Done"]})})})]})}}]),a}(n.a.Component),yn=a(48),kn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"mapTasksPerLabel",get:function(){var e=this.props.board,t=e.labels.map((function(e,t){return{label:e.title?e.title:"label".concat(t+1," (no title)"),id:e.id,tasks:0}}));return e.lists.forEach((function(e){t.forEach((function(t){e.cards.forEach((function(e){e.cardLabelIds.some((function(e){return e===t.id}))&&t.tasks++}))}))})),t=t.filter((function(e){return 0!==e.tasks}))}},{key:"getPieData",get:function(){var e=this.mapTasksPerLabel;return{labels:e.map((function(e){return e.label})),datasets:[{label:"# of Votes",data:e.map((function(e){return e.tasks})),backgroundColor:["#61bd4fb1","#f2d600b1","#ff9f1ab1","#eb5a46b1","#c377e0b1","#5ba4cfb1","#51e898b1","#2acce5b1","#ff8ed4b1"],borderColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#5ba4cf","#51e898","#2acce5","#ff8ed4"],borderWidth:.5}]}}},{key:"render",value:function(){var e=this.getPieData;return e.datasets[0].data.length?Object(Ce.jsxs)("div",{className:"pie-task-per-label",children:[Object(Ce.jsx)("h1",{children:"Tasks per label"}),Object(Ce.jsx)(yn.b,{data:e,height:10,width:10})]}):Object(Ce.jsxs)("div",{className:"pie-task-per-label no-result",children:[Object(Ce.jsx)("h1",{children:"Tasks per label"}),"Sorry, there is no tasks ",Object(Ce.jsx)("br",{}),"tagged to any labels..."]})}}]),a}(n.a.Component),Nn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"mapTasksPerMember",get:function(){var e=this.props.board,t=e.boardMembers.filter((function(e){return"pandaguest"!==e.username})).map((function(e){return{fullname:e.fullname,tasks:0}}));return e.lists.forEach((function(e){t.forEach((function(t){e.cards.forEach((function(e){e.cardMembers.some((function(e){return e.fullname===t.fullname}))&&t.tasks++}))}))})),t}},{key:"getPieData",get:function(){var e=this.mapTasksPerMember;return{labels:e.map((function(e){return e.fullname})),datasets:[{label:"Tasks",data:e.map((function(e){return e.tasks})),backgroundColor:["#45cbb2","#0079bf"],borderColor:["#45cbb2","#0079bf"],borderWidth:1}]}}},{key:"render",value:function(){var e=this.getPieData;return console.log("data",e),e.datasets[0].data.length<2?Object(Ce.jsxs)("div",{className:"bar-task-per-member no-result",children:[Object(Ce.jsx)("h1",{children:"Tasks per member"}),"Sorry, not enough data",Object(Ce.jsx)("br",{}),"to analyze..."]}):Object(Ce.jsxs)("div",{className:"bar-task-per-member",children:[Object(Ce.jsx)("h1",{children:"Tasks per member"}),Object(Ce.jsx)(yn.a,{height:350,width:200,data:e,options:{indexAxis:"y",maintainAspectRatio:!1,responsive:!0,scales:{x:{ticks:{stepSize:1}}},plugins:{legend:{display:!1}}}})]})}}]),a}(n.a.Component),In=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getMapTasksPerList",get:function(){var e=this.props.board,t=[];return e.lists.forEach((function(e){t.push({list:e.listTitle,tasks:e.cards.length})})),t}},{key:"getBarData",get:function(){var e=this.getMapTasksPerList;return{labels:e.map((function(e){return e.list})),datasets:[{label:"Tasks",data:e.map((function(e){return e.tasks})),backgroundColor:["#45cbb2","#0079bf"],borderColor:["#45cbb2","#0079bf"],borderWidth:1}]}}},{key:"render",value:function(){var e=this.getBarData;return Object(Ce.jsxs)("div",{className:"bar-task-per-list",children:[Object(Ce.jsx)("h1",{children:"Tasks per list"}),Object(Ce.jsx)(yn.a,{data:e,height:200,width:350,options:{scales:{y:{ticks:{stepSize:1}}},legend:{display:!1},plugins:{legend:{display:!1}}}})]})}}]),a}(n.a.Component),wn=a(278),Bn=a.n(wn),Sn=a(279),Tn=a.n(Sn),Dn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getTasksCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){t+=e.cards.length})),t}},{key:"getOverdueCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()&&t++}))})),t}},{key:"percentage",get:function(){return this.getOverdueCount/this.getTasksCount*100}},{key:"render",value:function(){var e=this.props.board;return Object(Ce.jsxs)("div",{className:"dashboard-title",children:[Object(Ce.jsxs)("h1",{className:"title flex align-center justify-center",children:[Object(Ce.jsx)(Bn.a,{}),e.boardTitle]}),Object(Ce.jsxs)("ul",{className:"dashboard-stats clean-list",children:[Object(Ce.jsx)("li",{children:Object(Ce.jsxs)("h2",{children:[Object(Ce.jsx)(Jr.a,{}),this.getTasksCount," Tasks"]})}),Object(Ce.jsx)("li",{children:Object(Ce.jsxs)("h2",{children:[Object(Ce.jsx)(et.a,{}),e.boardMembers.length," Members"]})}),Object(Ce.jsx)("li",{children:Object(Ce.jsxs)("h2",{children:[Object(Ce.jsx)(Tn.a,{}),this.getOverdueCount," Overdue"]})})]})]})}}]),a}(n.a.Component),Ln=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getMapTasksOverTime",get:function(){var e=this.props.board,t={};return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate.date&&(t[e.dueDate.date]?t[e.dueDate.date].count++:t[e.dueDate.date]={count:1,color:"#45cbb2"},e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()&&(t[e.dueDate.date].color="#eb5a46"))}))})),{data:(t=Object.entries(t).sort((function(e,t){return e[0].localeCompare(t[0])}))).map((function(e){return{x:e[0],y:e[1].count}})),background:t.map((function(e){return e[1].color}))}}},{key:"render",value:function(){var e=this.getMapTasksOverTime;return e.data.length?Object(Ce.jsxs)("div",{className:"line-tasks-over-time",children:[Object(Ce.jsx)("h1",{children:"Tasks per date"}),Object(Ce.jsx)(yn.c,{height:200,width:300,data:{datasets:[{data:e.data,backgroundColor:e.background,borderColor:"rgb(75, 192, 192)",tension:.5,borderWidth:1.5,showLine:!0,pointRadius:6}]},options:{scales:{x:{ticks:{callback:function(e,t,a){return new Date(e).toString().substring(4,11)}}},y:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{tooltip:{callbacks:{label:function(){return"Task"}}}}}})]}):Object(Ce.jsxs)("div",{className:"line-tasks-over-time no-result",children:[Object(Ce.jsx)("h1",{children:"Tasks over time"}),"Sorry, not enough data to analyze.. ",Object(Ce.jsx)("br",{}),"try add more tasks"]})}}]),a}(n.a.Component),An=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).goBack=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){yn.d.font.size=16,yn.d.color="#fff",yn.d.plugins.legend.display=!1}},{key:"render",value:function(){var e=this.props.board,t=e.lists.filter((function(e){return 0!==e.cards.length}));return e.lists.length&&t.length?Object(Ce.jsxs)("div",{className:"dashboard-wrapper",children:[Object(Ce.jsx)("div",{className:"screen-dashboard"}),Object(Ce.jsxs)("section",{className:"dashboard",children:[Object(Ce.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:this.goBack,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})}),Object(Ce.jsx)(Dn,{board:e}),Object(Ce.jsxs)("div",{className:"charts-container",children:[Object(Ce.jsx)(Nn,{board:e}),Object(Ce.jsx)(kn,{board:e}),Object(Ce.jsx)(Cn,{board:e}),Object(Ce.jsx)(Ln,{board:e}),Object(Ce.jsx)(In,{board:e})]})]})]}):Object(Ce.jsxs)("div",{className:"dashboard-wrapper",children:[Object(Ce.jsx)("div",{className:"screen-dashboard"}),Object(Ce.jsxs)("section",{className:"dashboard",children:[Object(Ce.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:this.goBack,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})}),Object(Ce.jsxs)("h1",{className:"no-data",children:["No data to show... ",Object(Ce.jsx)("br",{}),"Try adding tasks to your board"]})]})]})}}]),a}(n.a.Component);var Mn={loadBoard:ce},En=Object(x.b)((function(e){return{board:e.boardReducer.board}}),Mn)(An),Un=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isMenuOpen:!1},e.onUpdateBoard=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";e.props.updateBoard(t,a,r,n)},e.onDragEnd=function(t){var a=t.destination,r=t.source,n=t.type,s=e.props.board;if(a){var c=r.droppableId,i=a.droppableId,o=r.index,d=a.index;if(c!==i||d!==o){if("list"===n){var l,u=s.lists.splice(o,1);return(l=s.lists).splice.apply(l,[d,0].concat(Object(m.a)(u))),void e.props.updateBoard(s)}if(c===i){var b,j=s.lists.find((function(e){return e.listId===c})),h=j.cards.splice(o,1);(b=j.cards).splice.apply(b,[d,0].concat(Object(m.a)(h)))}if(c!==i){var p,f=s.lists.find((function(e){return e.listId===c})),O=f.cards.splice(o,1),x=s.lists.find((function(e){return e.listId===i}));if(!x.cards)return void x.push(O);(p=x.cards).splice.apply(p,[d,0].concat(Object(m.a)(O)))}e.props.updateBoard(s)}}},e.onToggleLabels=function(){e.props.toggleLabels()},e.onOpenDashboard=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id,"/dashboard"))},e.goToTemplateClone=function(t){e.props.history.push("/boards/".concat(t))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,a,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedInUser){e.next=6;break}return e.next=3,this.props.loginAsGuest();case 3:return t=e.sent,e.next=6,this.props.loadBoards(t._id);case 6:a=this.props.match.params.boardId,this.props.loadBoard(a),F.emit("boardId",a),F.on("board updated",(function(e){r.props.loadBoard(e._id)})),F.on("sending notification",(function(e){r.props.setNotif(e)}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){F.off("board updated",this.updateSocket),F.off("boardId"),this.props.setNotif(!1),F.off("sending notification")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.match.params.boardId;e.board&&a!==this.props.board._id&&this.props.loadBoard(a)}},{key:"render",value:function(){var e=this.props.board;if(!e||!Object.keys(e).length)return Object(Ce.jsx)(dr,{});var t=$.getFormattedBgStyle(e.boardStyle,"full");return Object(Ce.jsxs)("section",{className:"board-app flex direction-col",children:[Object(Ce.jsx)(h.a,{exact:!0,component:gn,path:"/boards/:boardId/:listId/:cardId"}),Object(Ce.jsx)(h.a,{exact:!0,component:En,path:"/boards/:boardId/dashboard"}),Object(Ce.jsx)(wr,{board:e,onUpdateBoard:this.onUpdateBoard,onOpenDashboard:this.onOpenDashboard,goToTemplateClone:this.goToTemplateClone}),Object(Ce.jsx)("div",{className:"board-background",style:t}),Object(Ce.jsxs)("div",{className:"board-canvas flex",children:[Object(Ce.jsx)(xe.a,{onDragEnd:this.onDragEnd,children:Object(Ce.jsx)(Xa,{board:e,lists:e.lists,onUpdateBoard:this.onUpdateBoard,className:"board"})}),Object(Ce.jsx)(Sr,{board:e,onUpdateBoard:this.onUpdateBoard})]})]})}}]),a}(n.a.Component);var Fn={removeBoard:de,loadBoards:se,loadBoard:ce,updateBoard:be,toggleLabels:le,setNotif:he,loginAsGuest:me},_n=Object(x.b)((function(e){return{boards:e.boardReducer.boards,board:e.boardReducer.board,isLabelOpen:e.boardReducer.isLabelOpen,loggedInUser:e.userReducer.loggedInUser}}),Fn)(Un),Rn=a.p+"static/media/trackit-logo.eee6b0e1.svg",Pn=a.p+"static/media/trackit-logo-white.83a18cf5.svg";function Gn(e){var t=e.isLoggedIn,a=t?"/boards":"/",r=t?Pn:Rn;return Object(Ce.jsx)(ta.c,{to:a,children:Object(Ce.jsxs)("div",{className:"logo-container flex align-center",children:[Object(Ce.jsx)("span",{className:"icon-span flex align-center justify-center",children:Object(Ce.jsx)("img",{className:"icon",src:r,alt:""})}),Object(Ce.jsx)("h1",{className:"logo-name",children:"TrackIt"})]})})}function Hn(){return Object(Ce.jsx)("header",{className:"home-header flex",children:Object(Ce.jsxs)("nav",{className:"nav-bar flex space-between align-center",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!1}),Object(Ce.jsxs)("div",{className:"login-signup flex align-center",children:[Object(Ce.jsx)(ta.c,{className:"login",to:"/login",children:"Log in"}),Object(Ce.jsx)(ta.c,{className:"signup home-btn",to:"/signup",children:"Sign up"})]})]})})}var qn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onStartAsGuest=Object(O.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loginAsGuest();case 2:e.props.history.push("/boards");case 3:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"render",value:function(){return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("section",{className:"home-page main-container",children:[Object(Ce.jsx)(Hn,{}),Object(Ce.jsxs)("div",{className:"hero flex align-center",children:[Object(Ce.jsxs)("div",{className:"info flex direction-col justify-center align-center",children:[Object(Ce.jsx)("h1",{children:"TrackIt helps teams to stay on track."}),Object(Ce.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with TrackIt."}),Object(Ce.jsx)("button",{onClick:this.onStartAsGuest,className:"start home-btn",children:"Try as a guest"})]}),Object(Ce.jsx)("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/p/res/images/spirit/hero/6a3ccd8e5c9a0e8ebea4235d12da6b24/hero.png",alt:""})]})]})})}}]),a}(n.a.Component);var zn={loginAsGuest:me},Wn=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),zn)(qn),Jn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={credentials:{username:"",password:""},isLoginFailed:!1,isLoading:!1},e.clearForm=function(){var t={username:"",password:""};e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{credentials:t})}))},e.handleChange=function(t){var a=t.target.name,r=t.target.value;e.setState({credentials:Object(g.a)(Object(g.a)({},e.state.credentials),{},Object(Jt.a)({},a,r))})},e.onLogin=Object(O.a)(f.a.mark((function t(){var a,r=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r.length>0&&void 0!==r[0]?r[0]:null)&&a.preventDefault(),t.prev=2,e.setState({isLoading:!0}),t.next=6,e.props.onLogin(e.state.credentials);case 6:e.props.history.push("/boards"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,isLoginFailed:!0})})),e.clearForm(),setTimeout(e.clearErrMsg,5e3);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.clearErrMsg=function(){e.setState({isLoginFailed:!1})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.credentials,t=e.username,a=e.password,r=this.state,n=r.isLoginFailed,s=r.isLoading;return Object(Ce.jsxs)("div",{className:"login-signup-page",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!1}),Object(Ce.jsxs)("div",{className:"form-container",children:[s&&Object(Ce.jsx)(dr,{}),n&&Object(Ce.jsx)("p",{className:"login-signup-error",children:"Login failed, please check your username and password"}),Object(Ce.jsx)("h3",{children:"Log in to TrackIt"}),Object(Ce.jsxs)("form",{className:"login-signup-form flex direction-col align-center justify-center",onSubmit:this.onLogin,children:[Object(Ce.jsx)("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:this.handleChange,required:!0,autoFocus:!0}),Object(Ce.jsx)("input",{type:"password",name:"password",value:a,placeholder:"Password",onChange:this.handleChange,required:!0}),Object(Ce.jsx)("button",{children:"Log in"})]}),Object(Ce.jsx)(ta.b,{className:"to-login-signup",to:"/signup",children:"Sign up for an account"})]})]})}}]),a}(n.a.Component);var Kn={onLogin:Oe,loadBoards:se},Vn=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Kn)(Jn),Qn=a(280),Xn=a.n(Qn),Yn=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={credentials:{username:"",password:"",fullname:"",imgUrl:""},isSignupFailed:!1,isLoading:!1},e.clearForm=function(){var t={username:"",password:"",fullname:"",imgUrl:""};e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{credentials:t})}))},e.handleChange=function(t){var a=t.target.name,r=t.target.value;e.setState({credentials:Object(g.a)(Object(g.a)({},e.state.credentials),{},Object(Jt.a)({},a,r))})},e.onSignup=Object(O.a)(f.a.mark((function t(){var a,r=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r.length>0&&void 0!==r[0]?r[0]:null)&&a.preventDefault(),t.prev=2,e.setState({isLoading:!0}),t.next=6,e.props.onSignup(e.state.credentials);case 6:e.props.history.push("/boards"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,isSignupFailed:!0})})),e.clearForm(),setTimeout(e.clearErrMsg,5e3);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.clearErrMsg=function(){e.setState({isSignupFailed:!1})},e.responseGoogle=function(t){console.log(t);var a=t.profileObj.name,r=t.profileObj.givenName,n=t.profileObj.imageUrl;e.setState({credentials:Object(g.a)(Object(g.a)({},e.state.credentials),{},{fullname:a,username:r,imgUrl:n})}),e.onSignup()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.credentials,t=e.username,a=e.password,r=e.fullname,n=this.state,s=n.isSignupFailed,c=n.isLoading;return Object(Ce.jsxs)("div",{className:"login-signup-page",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!1}),Object(Ce.jsxs)("div",{className:"form-container",children:[c&&Object(Ce.jsx)(dr,{}),s&&Object(Ce.jsx)("p",{className:"login-signup-error",children:"Username is already in use"}),Object(Ce.jsx)("h3",{children:"Sign up for your account"}),Object(Ce.jsxs)("form",{className:"login-signup-form flex direction-col align-center justify-center",onSubmit:this.onSignup,children:[Object(Ce.jsx)("input",{type:"text",name:"fullname",value:r,placeholder:"Full Name",onChange:this.handleChange,required:!0,autoFocus:!0}),Object(Ce.jsx)("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:this.handleChange,required:!0}),Object(Ce.jsx)("input",{type:"password",name:"password",value:a,placeholder:"Password",onChange:this.handleChange,required:!0}),Object(Ce.jsx)(Xn.a,{clientId:"424178974509-9hf317najboqtp0hkg1to5j6ogduo4r6.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"}),Object(Ce.jsx)("button",{children:"Sign up"})]}),Object(Ce.jsx)(ta.b,{className:"to-login-signup",to:"/login",children:"Already have an account? Log In"})]})]})}}]),a}(n.a.Component);var Zn={onSignup:function(e){return console.log("credentials",e),function(t){G.signup(e).then((function(e){t({type:"SET_USER",user:e})})).catch((function(e){console.log("Cannot signup",e)}))}}},$n=Object(x.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Zn)(Yn);function es(e){var t=e.board,a=e.loggedInUser,r=e.toggleStarBoard,n=e.isYellow,s=e.isLarge,c=$.getFormattedBgStyle(t.boardStyle);return Object(Ce.jsx)(ta.b,{to:"/boards/".concat(t._id),children:Object(Ce.jsxs)("div",{className:"board-preview",style:c,children:["object"===typeof t.boardStyle?Object(Ce.jsx)("div",{className:"darken-image"}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsxs)("div",{className:"preview-details flex direction-col space-between",children:[Object(Ce.jsx)("h3",{className:"board-title",children:t.boardTitle}),Object(Ce.jsx)("div",{className:"board-preview-bottom",children:t.createdBy?Object(Ce.jsxs)(Ce.Fragment,{children:[t.createdBy._id!==a._id?Object(Ce.jsxs)("p",{className:"board-owner",children:[t.createdBy.fullname,"'s board"]}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsx)("button",{className:"star-btn ".concat(t.isStarred?"show":""),onClick:function(e){return r(e,t)},children:Object(Ce.jsx)(Ya.b.Provider,{value:{className:"star-icon ".concat(n?"yellow":""," ").concat(s?"large":"")},children:Object(Ce.jsx)(aa.a,{})})})]}):Object(Ce.jsx)(Ce.Fragment,{})})]})]})})}var ts=a(282),as=a(281);function rs(e){var t=e.path;return Object(Ce.jsxs)("section",{className:"side-nav flex direction-col",children:[Object(Ce.jsx)(ta.c,{to:"/boards",children:Object(Ce.jsxs)("div",{className:"nav-item flex align-center".concat("boards"===t?" active":""),children:[Object(Ce.jsx)(as.a,{}),Object(Ce.jsx)("h3",{children:"Boards"})]})}),Object(Ce.jsx)(ta.c,{to:"/templates",children:Object(Ce.jsxs)("div",{className:"nav-item flex align-center".concat("templates"===t?" active":""),children:[Object(Ce.jsx)(ts.a,{}),Object(Ce.jsx)("h3",{children:"Templates"})]})})]})}var ns=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={templateBoards:[]},e.getTemplateBoards=function(){return e.props.boards.filter((function(e){return!e.createdBy}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser){e.next=5;break}return e.next=4,this.props.loginAsGuest();case 4:t=e.sent;case 5:return e.next=7,this.props.loadBoards(t._id);case 7:a=this.getTemplateBoards(),this.setState({templateBoards:a}),this.props.loadBoard(null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.path.slice(1),t=this.state.templateBoards;return this.props.loggedInUser&&t.length?Object(Ce.jsx)("section",{className:"main-container boards",children:Object(Ce.jsxs)("section",{className:"boards-page flex",children:[Object(Ce.jsx)(rs,{path:e}),Object(Ce.jsx)("section",{className:"boards-section",children:Object(Ce.jsxs)("section",{className:"template-boards",children:[Object(Ce.jsx)("h3",{children:"Templates"}),Object(Ce.jsx)("div",{className:"boards-preview",children:t.map((function(e){return e.isStarred=!1,Object(Ce.jsx)(es,{board:e},e._id)}))})]})})]})}):Object(Ce.jsx)(dr,{})}}]),a}(n.a.Component);var ss={loadBoards:se,loadBoard:ce},cs=Object(x.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),ss)(ns),is=a.p+"static/media/close-icon-white.95ac7fd6.svg",os=a.p+"static/media/checked-icon-white.52bf0792.svg",ds=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={title:"",backgrounds:[{small:"https://images.unsplash.com/photo-1632813101579-7e7d4dd2c69a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQzNDg&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632813101579-7e7d4dd2c69a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632714394526-1e87d08d56c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQzODg&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632714394526-1e87d08d56c4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632829754530-d94a588e2dde?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQ0MTk&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632829754530-d94a588e2dde?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632918425510-c02e76616549?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQ0NDI&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632918425510-c02e76616549?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1527&q=80"},"linear-gradient(225deg, rgb(255, 60, 172) 0%, rgb(120, 75, 160) 50%, rgb(43, 134, 197) 100%)","#0079bf","#d29034","#519839","#b04632"],selectedBgIdx:0},e.handleChange=function(t){var a=t.target.value;e.setState({title:a})},e.createBoard=function(){var t=Object(O.a)(f.a.mark((function t(a){var r,n,s,c,i,o,d,l,u,b,j;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.state,n=r.title,s=r.backgrounds,c=r.selectedBgIdx,n){t.next=4;break}return t.abrupt("return");case 4:if(i=e.props.loggedInUser,(o=Object(g.a)({},i)).isStarred=!1,d=[o],"pandaguest"===i.username){t.next=14;break}return t.next=11,G.getGuestUser();case 11:(l=t.sent).isStarred=!1,d.push(l);case 14:return u={boardTitle:n,createdAt:Date.now(),createdBy:i,cardsCount:0,boardStyle:s[c],covers:e.getCovers(),labels:e.getLabels(),boardMembers:d,lists:[],activities:[],archive:[]},t.next=17,e.props.addBoard(u);case 17:b=e.props,j=b.board,(0,b.onToggleCreateBoard)(),e.props.history.push("/boards/".concat(j._id));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getLabels=function(){for(var e=[],t=1;t<=6;t++){var a={id:$.makeId(),title:"",color:"clr".concat(t)};e.push(a)}return e},e.getCovers=function(){for(var e=[],t=1;t<=10;t++){var a={id:$.makeId(),color:"clr".concat(t)};e.push(a)}return e},e.selectBg=function(t){e.setState({selectedBgIdx:t})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,r=t.backgrounds,n=t.selectedBgIdx,s=r[n],c=$.getFormattedBgStyle(s);return Object(Ce.jsxs)("div",{className:"create-board-wrapper",children:[Object(Ce.jsx)("div",{className:"screen",onClick:this.props.onToggleCreateBoard}),Object(Ce.jsxs)("div",{className:"create-board flex direction-col align-center",children:[Object(Ce.jsxs)("div",{className:"board-preview flex",children:[Object(Ce.jsxs)("div",{className:"title-section",style:c,children:[n<4&&Object(Ce.jsx)("span",{className:"bg-overlay"}),Object(Ce.jsx)("button",{className:"close-btn",onClick:this.props.onToggleCreateBoard,children:Object(Ce.jsx)("img",{src:is,alt:"Close"})}),Object(Ce.jsx)("form",{onSubmit:this.createBoard,children:Object(Ce.jsx)("input",{type:"text",autoComplete:"off",className:"title-input",name:"title",placeholder:"Add board title",value:a,onChange:this.handleChange})}),Object(Ce.jsxs)("p",{className:"user-title",children:[this.props.loggedInUser.fullname,"'s Workspace"]})]}),Object(Ce.jsx)("div",{className:"choose-bg flex wrap space-between",children:r.map((function(t,a){var r=$.getFormattedBgStyle(t,"small");return Object(Ce.jsx)("div",{className:"bg-color",style:r,onClick:function(){return e.selectBg(a)},children:a===n&&Object(Ce.jsx)("span",{className:"selected",children:Object(Ce.jsx)("img",{src:os,alt:"selected"})})},$.makeId())}))})]}),Object(Ce.jsx)("button",{className:"create-btn".concat(a?"":" disabled"),onClick:this.createBoard,children:"Create board"})]})]})}}]),a}(n.a.Component);var ls={addBoard:oe,loadBoard:ce},us=Object(h.f)(ds),bs=Object(x.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),ls)(us),js=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={userBoards:[],isCreateBoard:!1},e.getBoardsByType=function(t){var a=e.props.loggedInUser;return G.filterUserBoards(e.state.userBoards,a._id,t)},e.toggleStarBoard=function(t,a){t.preventDefault();var r=e.props,n=r.loggedInUser;(0,r.updateBoard)(G.toggleStarBoard(a,n._id))},e.onToggleCreateBoard=function(){var t=e.state.isCreateBoard;e.setState({isCreateBoard:!t})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser){e.next=5;break}return e.next=4,this.props.loginAsGuest();case 4:t=e.sent;case 5:return e.next=7,this.props.loadBoards(t._id);case 7:a=G.filterUserBoards(this.props.boards,t._id,"all"),console.log("userBoards",a),this.setState({userBoards:a}),this.props.loadBoard(null);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.match.path.slice(1),a=this.state.userBoards,r=this.props.loggedInUser;if(!r)return Object(Ce.jsx)(dr,{});var n=a.length?this.getBoardsByType("starred"):[],s=a.length?this.getBoardsByType("owner"):[],c=a.length?this.getBoardsByType("guest"):[];return Object(Ce.jsxs)("section",{className:"main-container boards",children:[Object(Ce.jsxs)("section",{className:"boards-page flex",children:[Object(Ce.jsx)(rs,{path:t}),Object(Ce.jsxs)("section",{className:"boards-section",children:[n.length?Object(Ce.jsxs)("section",{className:"inner-section starred-boards",children:[Object(Ce.jsxs)("div",{className:"star-title flex",children:[Object(Ce.jsx)(Ya.b.Provider,{value:{className:"star-icon"},children:Object(Ce.jsx)(aa.a,{})}),Object(Ce.jsx)("h3",{children:"Starred boards"})]}),Object(Ce.jsx)("div",{className:"boards-preview",children:n.map((function(t){return Object(Ce.jsx)(es,{board:t,loggedInUser:r,toggleStarBoard:e.toggleStarBoard,isYellow:!0},t._id)}))})]}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsxs)("section",{className:"inner-section user-boards",children:[Object(Ce.jsx)("h3",{children:"Your Boards"}),Object(Ce.jsxs)("div",{className:"boards-preview",children:[s.map((function(t){return t.isStarred=t.boardMembers.find((function(e){return e._id===r._id})).isStarred,Object(Ce.jsx)(es,{board:t,loggedInUser:r,toggleStarBoard:e.toggleStarBoard,isLarge:t.isStarred},t._id)})),Object(Ce.jsx)("div",{className:"board-preview create-board flex align-center justify-center",onClick:this.onToggleCreateBoard,children:"Create new board"})]})]}),c.length?Object(Ce.jsxs)("section",{className:"inner-section guest-boards user-boards",children:[Object(Ce.jsx)("h3",{children:"Guest Boards"}),Object(Ce.jsx)("div",{className:"boards-preview",children:c.map((function(t){return t.isStarred=t.boardMembers.find((function(e){return e._id===r._id})).isStarred,Object(Ce.jsx)(es,{board:t,loggedInUser:r,toggleStarBoard:e.toggleStarBoard,isLarge:t.isStarred},t._id)}))})]}):Object(Ce.jsx)(Ce.Fragment,{})]})]}),this.state.isCreateBoard&&Object(Ce.jsx)(bs,{onToggleCreateBoard:this.onToggleCreateBoard})]})}}]),a}(n.a.Component);var hs={loadBoard:ce,loadBoards:se,updateBoard:be,loginAsGuest:me};var ps=[{path:"/boards/:boardId",component:_n},{path:"/boards",component:Object(x.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),hs)(js)},{path:"/cardNotFound",component:function(){return Object(Ce.jsxs)("section",{className:"card-not-found",children:[Object(Ce.jsx)("h1",{children:"Card not found."}),Object(Ce.jsxs)("div",{children:["This card may be deleted or on a private board. ",Object(Ce.jsx)("br",{}),"If someone gave you this link, they may need to invite you to one of their boards or Workspaces."]})]})}},{path:"/templates",component:cs},{path:"/login",component:Vn},{path:"/signup",component:$n},{path:"/",component:Wn}],fs=a(283),Os=a.p+"static/media/menu-plus-icon.7b919228.svg",ms=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isCreateBoard:!1,isUserBoardsOpen:!1,isStarredBoardsOpen:!1,isNotif:!1},e.onToggleCreateBoard=function(){var t=e.state.isCreateBoard;e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{isCreateBoard:!t})}))},e.onToggleUserBoards=function(){var t=e.state.isUserBoardsOpen;e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{isUserBoardsOpen:!t})}))},e.onToggleStarredBoards=function(){var t=e.state.isStarredBoardsOpen;e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{isStarredBoardsOpen:!t})}))},e.markReadNotif=function(){e.props.setNotif(!1)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){F.setup()}},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,a=e.isNotif;if(Object(fs.a)(this.state),!t)return Object(Ce.jsx)(Ce.Fragment,{});var r=a?"newNotif":"noNotif";return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)("header",{className:"main-header",children:Object(Ce.jsxs)("nav",{className:"nav-bar flex space-between",children:[Object(Ce.jsxs)("div",{className:"main-nav-links flex align-center",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!0}),Object(Ce.jsx)("span",{className:"header-btn".concat(this.state.isUserBoardsOpen?" open":""),children:Object(Ce.jsx)(Oa,{type:"userBoards",titleModal:"Boards",onToggle:this.onToggleUserBoards})}),Object(Ce.jsx)("span",{className:"header-btn starred".concat(this.state.isStarredBoardsOpen?" open":""),children:Object(Ce.jsx)(Oa,{type:"starredBoards",titleModal:"Starred boards",onToggle:this.onToggleStarredBoards})}),Object(Ce.jsx)("button",{className:"header-btn create",onClick:this.onToggleCreateBoard,children:"Create"}),Object(Ce.jsx)("button",{className:"header-btn create-small flex align-center justify-center",onClick:this.onToggleCreateBoard,children:Object(Ce.jsx)("img",{src:Os,alt:""})})]}),Object(Ce.jsxs)("div",{className:"user-section flex align-center",children:[Object(Ce.jsx)("div",{className:"notifications",children:Object(Ce.jsx)(Oa,{type:r,titleModal:"Notifications",markReadNotif:this.markReadNotif})}),Object(Ce.jsx)("div",{className:"user-avatar",children:Object(Ce.jsx)(Oa,{type:"userMenu",titleModal:"Account",user:t,from:"AppHeader"})})]})]})}),this.state.isCreateBoard&&Object(Ce.jsx)(bs,{onToggleCreateBoard:this.onToggleCreateBoard})]})}}]),a}(n.a.Component);var xs={setNotif:he},gs=Object(x.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser,isNotif:e.boardReducer.isNotif,notifCount:e.boardReducer.notifCount}}),xs)(ms),vs=a(285),Cs=a.n(vs),ys=a(284),ks=a.n(ys),Ns=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={msg:null},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=ee.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),4e3)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var e=this;if(!this.state.msg)return Object(Ce.jsx)("span",{});var t=this.state.msg.type||"";return Object(Ce.jsxs)("section",{className:"user-msg  flex direction-row align-center",children:[Object(Ce.jsxs)("div",{className:" txt-msg flex direction-row align-center",children:["danger"===t&&Object(Ce.jsx)(ks.a,{}),"success"===t&&Object(Ce.jsx)(Cs.a,{}),this.state.msg.txt]}),Object(Ce.jsx)("button",{onClick:function(){e.setState({msg:null})},children:"x"})]})}}]),a}(n.a.Component),Is=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onOnline=function(){if(console.log("online"),ne.loadFromStorage("BOARD_DB")){var t=ne.loadFromStorage("BOARD_DB");ne.saveToStorage("BOARD_DB",null),F.emit("boardId",t._id),e.props.updateBoard(t),ae("Back online,all changes updated!")}},e.onOffline=function(){console.log("offline"),e.props.setOffline(!0),re("offline, changes will sync when back online")},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("offline",this.onOffline),window.addEventListener("online",this.onOnline)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline)}},{key:"render",value:function(){return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(gs,{}),Object(Ce.jsxs)("main",{children:[Object(Ce.jsx)(h.c,{children:ps.map((function(e){return Object(Ce.jsx)(h.a,{component:e.component,path:e.path},e.path)}))}),Object(Ce.jsx)(Ns,{})]})]})}}]),a}(n.a.Component);var ws={setOffline:function(e){return function(){var t=Object(O.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_OFFLINE",isOffline:e})}catch(r){console.log("Cannot set offline",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateBoard:be},Bs=Object(x.b)((function(e){return{board:e.boardReducer.board,isOffline:e.boardReducer.isOffline}}),ws)(Is),Ss=(a(512),a(54)),Ts=a(286),Ds={boards:[],board:null,lastUpdatedBoard:null,isLabelOpen:!1,currCard:null,currList:null,isNotif:!1,notifCount:0,filterBy:{searchKey:"",labels:[],members:[],isFilter:!1,cardsCount:0},labelsProps:{label:{},isCreate:!1},searchBg:"",isOffline:!1};var Ls={loggedInUser:G.getLoggedinUser()};var As=Object(Ss.c)({boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ds,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"SET_BOARDS":return Object(g.a)(Object(g.a)({},e),{},{boards:t.boards});case"SET_BOARD":var a=JSON.parse(JSON.stringify(t.board));return Object(g.a)(Object(g.a)({},e),{},{board:Object(g.a)({},t.board),lastUpdatedBoard:a});case"ADD_BOARD":return Object(g.a)(Object(g.a)({},e),{},{board:t.board,boards:[].concat(Object(m.a)(e.boards),[t.board])});case"REMOVE_BOARD":return Object(g.a)(Object(g.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"UPDATE_BOARD":return Object(g.a)(Object(g.a)({},e),{},{board:t.board,boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"UPDATE_LAST_UPDATED_BOARD":var r=JSON.parse(JSON.stringify(e.board));return Object(g.a)(Object(g.a)({},e),{},{lastUpdatedBoard:r});case"UNDO_UPDATE_BOARD":if(e.lastUpdatedBoard){var n=JSON.parse(JSON.stringify(e.lastUpdatedBoard));return Object(g.a)(Object(g.a)({},e),{},{boards:e.boards.map((function(t){return t._id===e.board._id?e.lastUpdatedBoard:t})),board:n})}return e;case"TOGGLE_LABELS":var s=e.isLabelOpen;return Object(g.a)(Object(g.a)({},e),{},{isLabelOpen:!s});case"SET_LIST":return Object(g.a)(Object(g.a)({},e),{},{currList:t.list});case"SET_CARD":return Object(g.a)(Object(g.a)({},e),{},{currCard:t.card});case"SET_NOTIF":return Object(g.a)(Object(g.a)({},e),{},{isNotif:t.isNotif});case"SET_NOTIF_COUNT":return Object(g.a)(Object(g.a)({},e),{},{notifCount:t.count});case"SET_NOTIF_COUNT++":return Object(g.a)(Object(g.a)({},e),{},{notifCount:e.notifCount+1});case"SET_FILTER":return Object(g.a)(Object(g.a)({},e),{},{filterBy:t.filterBy});case"SET_LABEL":return Object(g.a)(Object(g.a)({},e),{},{labelsProps:t.labelsProps});case"SET_SEARCH_BG":return Object(g.a)(Object(g.a)({},e),{},{searchBg:t.searchStr});case"SET_OFFLINE":return Object(g.a)(Object(g.a)({},e),{},{isOffline:t.isOffline});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ls,t=arguments.length>1?arguments[1]:void 0,a=e;if("SET_USER"===t.type)a=Object(g.a)(Object(g.a)({},e),{},{loggedInUser:t.user});return a}}),Ms=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ss.d,Es=Object(Ss.e)(As,Ms(Object(Ss.a)(Ts.a)));c.a.render(Object(Ce.jsx)(n.a.StrictMode,{children:Object(Ce.jsx)(x.a,{store:Es,children:Object(Ce.jsx)(ta.a,{children:Object(Ce.jsx)(Bs,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(t,e)}))}}(),d()}},[[513,1,2]]]);
//# sourceMappingURL=main.0e3d1fe7.chunk.js.map